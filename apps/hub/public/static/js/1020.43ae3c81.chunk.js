"use strict";(globalThis.webpackChunkfarahub=globalThis.webpackChunkfarahub||[]).push([[1020],{91020:(e,s,l)=>{l.r(s),l.d(s,{default:()=>fe});var r=l(81e3),n=l(73216),a=l(26240),t=l(34535),i=l(62559),o=l(18012),d=l(3111),c=l(70579);const x=(0,t.Ay)(i.Ay)((({theme:e})=>({...e.typography.button,padding:e.spacing(1.5,2),flexGrow:1,transition:"all .16s ease-in-out",borderRadius:e.shape.borderRadius,border:"1px solid ".concat(e.palette.grey[200]),"&.Mui-focused":{borderColor:e.palette.grey[500]}}))),p=({defaultValues:e,requestConfig:s,onCreateOrUpdate:l,autoFocus:n})=>{const a=(0,o.Mv)("Tasks.Lists"),t={name:"",...e},{register:i,reset:p,handleSubmit:u}=(0,d.A)({initialValues:t,handlePost:e=>a.createOrUpdate(e,s),onSubmit:e=>{l(e),p(t)}});return(0,c.jsx)(r.A,{component:"form",sx:{display:"flex",backgroundColor:"grey.100"},onSubmit:u,children:(0,c.jsx)(x,{placeholder:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0644\u06cc\u0633\u062a...",inputProps:{style:{padding:0}},autoFocus:n,...i("name",["FormHelperTextProps","error","helperText"])})})};var u=l(91418),h=l(10697),m=l(17022),j=l(30124),g=l(12110),A=l(20036),b=l(85865),f=l(17392),y=l(26494),C=l(688),P=l(32143),S=l(2050),v=l(26353),k=l(65043);const w=(0,t.Ay)(i.Ay)((({theme:e})=>({...e.typography.button,padding:e.spacing(1.5,2),flexGrow:1,transition:"all .16s ease-in-out",borderRadius:e.shape.borderRadius,border:"1px solid ".concat(e.palette.grey[200]),"&.Mui-focused":{borderColor:e.palette.grey[500]}}))),z=({defaultValues:e,requestConfig:s,onCreateOrUpdate:l})=>{const n=(0,o.Mv)("Tasks.Cards"),a={name:"",...e},{register:t,reset:i,handleSubmit:x}=(0,d.A)({initialValues:a,handlePost:e=>n.createOrUpdate(e,s),onSubmit:e=>{l(e),i(a)}});return(0,c.jsx)(r.A,{component:"form",sx:{display:"flex",backgroundColor:"grey.100"},onSubmit:x,children:(0,c.jsx)(w,{sx:{py:1},placeholder:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0648\u0638\u06cc\u0641\u0647...",inputProps:{style:{padding:0}},...t("name",["FormHelperTextProps","error","helperText"])})})};var O=l(2081),q=l(5871),R=l(30298),F=l(97167),I=l(71612),V=l(4219),M=l(39336),T=l(35316),L=l(68903),N=l(29347),D=l(8302),U=l(51690),_=l(750),G=l(99275),W=l(92823),E=l.n(W),H=l(69958),K=l(13509),Y=l(45414),B=l(73293),Z=l(26520),$=l(69);const J=(0,t.Ay)(r.A,{shouldForwardProp:e=>!["styleOverrides","readOnly"].includes(e)})((({theme:e,styleOverrides:s,readOnly:l})=>({"& .ql-container":{boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontSize:e.typography.fontSize,height:"100%",margin:0,position:"relative",...s&&s.container},"& .ql-editor":{boxSizing:"border-box",height:"100%",outline:"none",overflowY:"auto",padding:l?"1px 0":"12px 15px",tabSize:4,textAlign:"left",whiteSpace:"pre-wrap",wordWrap:"break-word","& p, & ol, & ul, & pre, & blockquote, & h1, & h2, & h3, & h4, & h5, & h6":{margin:0,padding:0,counterReset:"list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9"},"& ol, & ul":{listStylePosition:"inside"},"> *":{cursor:"text"},...s&&s.editor},".ql-clipboard":{left:"-100000px",height:"1px",overflowY:"hidden",position:"absolute",top:"50%","& p":{margin:0,padding:0}},".ql-editor.ql-blank":{"&::before":{color:"rgba(0,0,0,0.6)",content:"attr(data-placeholder)",fontStyle:"",left:"15px",pointerEvents:"none",position:"absolute",right:"15px"}}}))),Q=(0,k.forwardRef)((({disabled:e},s)=>(0,c.jsxs)(r.A,{ref:s,sx:e=>({p:1,display:"flex",background:e.palette.grey[100],transition:"all .16s ease-in-out"}),children:[(0,c.jsxs)("span",{className:"",children:[(0,c.jsx)(f.A,{size:"small",color:"inherit",className:"ql-bold",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(H.A,{fontSize:"small"})}),(0,c.jsx)(f.A,{size:"small",color:"inherit",className:"ql-italic",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(K.A,{fontSize:"small"})}),(0,c.jsx)(f.A,{size:"small",color:"inherit",className:"ql-underline",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(B.A,{fontSize:"small"})}),(0,c.jsx)(f.A,{size:"small",color:"inherit",className:"ql-strike",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(Y.A,{fontSize:"small"})})]}),(0,c.jsx)(M.A,{orientation:"vertical",flexItem:!0,variant:"middle"}),(0,c.jsxs)("span",{className:"",children:[(0,c.jsx)(f.A,{size:"small",color:"inherit",className:"ql-list",value:"ordered",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)($.A,{fontSize:"small"})}),(0,c.jsx)(f.A,{size:"small",color:"inherit",className:"ql-list",value:"bullet",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(Z.A,{fontSize:"small"})})]})]}))),X=(0,k.forwardRef)((({value:e,onChange:s,containerProps:l,modules:r={},disabled:n=!1,readOnly:a=!1,toolbarPlacement:t="top",...i},o)=>{const[d,x]=(0,k.useState)(),p=(0,k.useMemo)((()=>({toolbar:{container:d},...r})),[d]),u=(0,c.jsx)(E(),{ref:o,theme:!1,value:e,onChange:(e,l,r)=>s&&s(e),modules:p,readOnly:a,...i});return(0,c.jsx)(J,{readOnly:a,...l,children:a?u:(0,c.jsxs)(c.Fragment,{children:["top"===t&&(0,c.jsx)(Q,{ref:x,disabled:n}),!!d&&u,"bottom"===t&&(0,c.jsx)(Q,{ref:x,disabled:n})]})})}));var ee=l(67444),se=l(26581),le=l(34109),re=l(66360),ne=l(38968),ae=l(51787),te=l(66789),ie=l(12766),oe=l(37978),de=l(27800),ce=l(74175);const xe=({loading:e,meta:s,lists:l,selected:r,onSelect:n,infiniteScrollProps:a,page:t,perPage:i,onPageChange:o,onPerPageChange:d})=>{const x=(0,de.A)(),p=e=>!!r&&(Array.isArray(r)?r.filter((s=>s.id===e.id)).length>0:r.id===e.id);return(0,c.jsx)(te.A,{data:l,loading:e,infiniteScrollProps:a,definitions:[{headerCellProps:{align:"center"},rowCellProps:{align:"center",width:25},renderCell:(e,s)=>(0,c.jsx)("div",{children:p(e)?(0,c.jsx)(se.A,{}):(0,c.jsx)(le.A,{})})},{title:"\u0631\u062f\u06cc\u0641",headerCellProps:{align:"center",width:100},rowCellProps:{align:"center"},renderCell:(e,s)=>(0,c.jsx)(ie.A,{children:x(s)})},{title:"\u0644\u06cc\u0633\u062a",field:"name",render:e=>(0,c.jsx)(ie.A,{children:e.name})}],renderSheetTitle:e=>e.name,renderListItemChildren:(e,s)=>(0,c.jsxs)(ne.A,{selected:p(e),onClick:()=>n(e),children:[(0,c.jsx)(S.A,{children:p(e)?(0,c.jsx)(se.A,{}):(0,c.jsx)(le.A,{})}),(0,c.jsx)(v.A,{primary:(0,c.jsx)("strong",{children:e.name})})]},s),tableRowProps:e=>({hover:!0,striped:!1,selected:p(e),onClick:s=>n(e)}),paginationProps:{count:s.total,rowsPerPage:i||25,page:t||0,onPageChange:(e,s)=>o(s),onRowsPerPageChange:e=>d(e.target.value)},listItemProps:{disablePadding:r},listProps:{disablePadding:!r}})},pe=({open:e,boardId:s,onClose:l,selected:n,onSelect:a,onClear:t})=>{const i=(0,o.Mv)("Tasks.Lists"),[d,x]=(0,k.useState)(""),p=(0,oe.A)(d,500),[u,h]=(0,k.useState)({page:0,perPage:25}),{data:m,total:j,loading:g,loadMore:A,reload:b}=(0,ce.A)({handleFetch:e=>i.list({boardId:s,...e,...u,query:p}),loadDeps:[e,u,p],infiniteScrollDefaultParams:u});return(0,c.jsxs)(G.A,{open:e,onClose:l,dialogProps:{fullWidth:!0,maxWidth:"sm"},children:[(0,c.jsxs)(V.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsx)(r.A,{children:"\u0627\u0646\u062a\u062e\u0627\u0628 \u0644\u06cc\u0633\u062a"}),(0,c.jsx)(f.A,{onClick:l,size:"small",children:(0,c.jsx)(I.A,{})})]}),(0,c.jsx)(M.A,{}),(0,c.jsx)(r.A,{sx:{p:2},children:(0,c.jsx)(ee.A,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",label:"\u062c\u0633\u062a\u062c\u0648 \u0639\u0646\u0648\u0627\u0646 \u0644\u06cc\u0633\u062a...",variant:"filled",value:d,onChange:e=>x(e.target.value),InputProps:{startAdornment:(0,c.jsx)(ae.A,{position:"start",children:(0,c.jsx)(re.A,{})})}})}),(0,c.jsx)(xe,{loading:g,lists:m,meta:{total:j},selected:n,onSelect:a,infiniteScrollProps:{loading:!1,hasNextPage:m.length<j,onLoadMore:A},page:u.page,perPage:u.perPage,onPageChange:e=>h({...u,page:e}),onPerPageChange:e=>h({...u,perPage:e})}),(0,c.jsx)(M.A,{}),(0,c.jsxs)(N.A,{children:[t&&(0,c.jsx)(D.A,{type:"button",onClick:t,children:"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646"}),(0,c.jsx)(r.A,{sx:{flexGrow:1}})]})]})},ue=({value:e,onChange:s,onSubmit:l,...n})=>{const a=(0,k.useRef)(null),[t,o]=(0,k.useState)();return(0,k.useEffect)((()=>{t&&a.current&&a.current.select()}),[t]),t?(0,c.jsx)(A.x,{onClickAway:e=>{o(!1),l()},children:(0,c.jsx)(r.A,{...n,component:"form",onSubmit:e=>{e.preventDefault(),o(!1),l()},children:(0,c.jsx)(i.Ay,{inputRef:a,value:e,onChange:e=>s(e.target.value),sx:{width:"100%"}})})}):(0,c.jsx)(r.A,{...n,onClick:e=>2===e.detail&&o(!0),children:e})},he=({value:e,onChange:s,onSubmit:l,...n})=>{const a=(0,k.useRef)(null),[t,i]=(0,k.useState)();return(0,k.useEffect)((()=>{t&&a.current&&a.current.focus()}),[t]),t?(0,c.jsx)(A.x,{onClickAway:e=>{i(!1),l()},children:(0,c.jsx)(r.A,{...n,children:(0,c.jsx)(X,{ref:a,value:e,onChange:s,placeholder:"\u0627\u06cc\u0646\u062c\u0627 \u0634\u0631\u062d \u062f\u0647\u06cc\u062f...",containerProps:{styleOverrides:{editor:{minHeight:100}}}})})}):(0,c.jsx)(r.A,{...n,sx:{p:2},onClick:e=>2===e.detail&&i(!0),children:(0,c.jsx)(X,{readOnly:!0,value:e,placeholder:"\u0627\u06cc\u0646\u062c\u0627 \u0634\u0631\u062d \u062f\u0647\u06cc\u062f...",modules:{toolbar:!1},containerProps:{styleOverrides:{editor:{minHeight:100}}}})})},me=({open:e,onClose:s,card:l={},onModify:n=()=>{}})=>{const[a,t]=(0,k.useState)(!1),[i,x]=(0,k.useState)(!1),[p,u]=(0,k.useState)({open:!1}),h=(0,o.Mv)("Tasks.Cards"),m={name:"",description:"",list:"",dueDate:null,...l},{getValue:j,setValue:g,handleSubmit:A}=(0,d.A)({initialValues:m,handlePost:e=>h.createOrUpdate(e),onSubmit:e=>{n(e),a&&t(!1),i&&x(!1),p.open&&u({open:!1})}});return(0,k.useEffect)((()=>{A()}),[j("list"),j("dueDate")]),(0,c.jsxs)(G.A,{open:e,onClose:s,dialogProps:{fullWidth:!0,maxWidth:"sm"},children:[(0,c.jsxs)(V.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsx)(ue,{value:j("name"),onChange:e=>g("name",e),onSubmit:A,sx:{flexGrow:1}}),(0,c.jsx)(f.A,{onClick:s,size:"small",children:(0,c.jsx)(I.A,{})})]}),(0,c.jsx)(M.A,{}),(0,c.jsxs)(T.A,{sx:{p:0},children:[(0,c.jsx)(he,{value:j("description"),onChange:e=>g("description",e),onSubmit:A}),(0,c.jsx)(M.A,{}),(0,c.jsx)(r.A,{sx:{p:2},children:(0,c.jsx)(L.Ay,{container:!0,children:(0,c.jsx)(L.Ay,{item:!0,xs:6,children:(0,c.jsx)(U.$,{dateAdapter:F.A,children:(0,c.jsx)(_.K,{disablePast:!0,label:"\u062a\u0627\u0631\u06cc\u062e \u0627\u0646\u062c\u0627\u0645",mask:"____/__/__",renderInput:e=>(0,c.jsx)(ee.A,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",...e}),value:j("dueDate"),onChange:e=>g("dueDate",e)})})})})})]}),(0,c.jsx)(M.A,{}),(0,c.jsxs)(N.A,{children:[(0,c.jsx)(D.A,{variant:"contained",onClick:()=>u({open:!0}),children:"\u0627\u0646\u062a\u0642\u0627\u0644"}),(0,c.jsx)(r.A,{sx:{flexGrow:1}})]}),(0,c.jsx)(pe,{boardId:l.board,...p,selected:l.list,onClose:A,onSelect:e=>g("list",e)})]})},je=({card:e={},menuProps:s={},onModify:l=()=>{}})=>{const a=(0,n.Zp)(),{addSegment:t,hasSegment:i,removeSegment:o}=(0,R.A)();return(0,c.jsxs)(g.A,{variant:"outlined",sx:{mb:1},children:[(0,c.jsxs)(r.A,{sx:{px:2,py:1,backgroundColor:"grey.100",display:"flex",cursor:"pointer",alignItems:"center"},onClick:()=>a(t(e.id)),children:[(0,c.jsx)(b.A,{variant:"button",sx:{flexGrow:1},children:e.name}),e.dueDate&&(0,c.jsx)(q.A,{fontSize:"small",color:"disabled"}),e.description&&(0,c.jsx)(O.A,{fontSize:"small",color:"disabled",sx:{ml:1}})]}),(0,c.jsx)(me,{card:e,open:i(e.id),onClose:()=>a(o(e.id),{replace:!0}),onModify:l})]})},ge=({list:e={cards:[]},cardFormProps:s={},onRenameList:l=()=>{},cardProps:n={}})=>{const[a,t]=(0,k.useState)(!1),[i,o]=(0,k.useState)(null);return(0,c.jsxs)(g.A,{variant:"outlined",children:[a?(0,c.jsx)(A.x,{onClickAway:()=>t(!1),children:(0,c.jsx)(r.A,{children:(0,c.jsx)(p,{defaultValues:e,onCreateOrUpdate:()=>{t(!1),l()},autoFocus:!0})})}):(0,c.jsxs)(r.A,{sx:{px:2,py:1.5,backgroundColor:"grey.100",display:"flex",alignItems:"center"},children:[(0,c.jsx)(b.A,{variant:"button",sx:{flexGrow:1},children:e.name}),(0,c.jsx)(f.A,{size:"small",edge:"end",onClick:e=>o(e.currentTarget),children:(0,c.jsx)(j.A,{})})]}),(0,c.jsxs)(y.A,{sx:{p:1},children:[e.cards.map(((e,s)=>(0,k.createElement)(je,{...n,card:e,key:s}))),(0,c.jsx)(z,{defaultValues:{list:e.id},...s})]}),(0,c.jsxs)(C.A,{anchorEl:i,open:Boolean(i),onClose:()=>o(null),children:[(0,c.jsxs)(P.A,{onClick:()=>{o(null),t(!0)},children:[(0,c.jsx)(S.A,{children:(0,c.jsx)(m.A,{fontSize:"small"})}),(0,c.jsx)(v.A,{children:"\u062a\u063a\u06cc\u06cc\u0631 \u0646\u0627\u0645"})]}),(0,c.jsxs)(P.A,{children:[(0,c.jsx)(S.A,{children:(0,c.jsx)(u.A,{fontSize:"small"})}),(0,c.jsx)(v.A,{children:"\u0628\u0627\u06cc\u06af\u0627\u0646\u06cc"})]}),(0,c.jsxs)(P.A,{children:[(0,c.jsx)(S.A,{children:(0,c.jsx)(h.A,{fontSize:"small"})}),(0,c.jsx)(v.A,{children:"\u062d\u0630\u0641"})]})]})]})};var Ae=l(15321);l(75128);const be=({data:e=[],loading:s,cardProps:l={},listFormProps:n={},cardFormProps:t={},onRenameList:i=()=>{}})=>{const o=(0,a.A)();return(0,c.jsx)(r.A,{children:(0,c.jsxs)(Ae.RC,{slidesPerView:1.25,breakpoints:{[o.breakpoints.values.sm]:{slidesPerView:2.25},[o.breakpoints.values.md]:{slidesPerView:3.25},[o.breakpoints.values.lg]:{slidesPerView:4.25},[o.breakpoints.values.sm]:{slidesPerView:5.25}},children:[e.map(((e,s)=>(0,c.jsx)(Ae.qr,{children:(0,c.jsx)(r.A,{sx:{px:1},children:(0,c.jsx)(ge,{list:e,cardFormProps:t,onRenameList:i,cardProps:l})})},s))),(0,c.jsx)(Ae.qr,{children:(0,c.jsx)(r.A,{sx:{px:1},children:(0,c.jsx)(p,{...n})})})]})})},fe=e=>{const s=(0,n.g)(),{board:l,reload:a}=(0,n.KC)();return(0,c.jsx)(r.A,{sx:{p:2},children:(0,c.jsx)(be,{loading:!1,data:l.lists,cardProps:{onModify:e=>a()},listFormProps:{defaultValues:{board:s.boardId},onCreateOrUpdate:e=>a()},cardFormProps:{onCreateOrUpdate:e=>a()},onRenameList:e=>a()})})}}}]);
//# sourceMappingURL=1020.43ae3c81.chunk.js.map