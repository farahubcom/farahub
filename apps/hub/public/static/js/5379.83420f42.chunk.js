"use strict";(globalThis.webpackChunkfarahub=globalThis.webpackChunkfarahub||[]).push([[5379],{11692:(e,o,t)=>{t.d(o,{Z:()=>z});var n=t(66934),s=t(49877),r=t(68870),i=t(13967),a=t(95193),l=t(55931),d=t(39157),c=t(61889),h=t(36314),p=t(36151),u=t(57689),x=t(46019),g=t(28367),m=t(26386),Z=t(13400),j=t(20890),v=(t(72791),t(80184));const b=(0,n.ZP)(Z.Z)((({theme:e})=>({display:"flex",flexDirection:"column",minWidth:94.5}))),f=(0,n.ZP)("span")((({theme:e})=>({display:"inline-block"}))),C=(0,n.ZP)(j.Z)((({theme:e})=>({...e.typography.button,display:"inline-block"}))),P=({label:e,labelTypographyProps:o={},children:t,...n})=>(0,v.jsxs)(b,{...n,children:[(0,v.jsx)(f,{children:t}),e&&(0,v.jsx)(C,{...o,children:e})]});var y=t(26411);const w=(0,n.ZP)(s.Z)((({theme:e})=>({position:"fixed",bottom:`calc(${e.spacing(2)} + 48px)`,left:e.spacing(2),zIndex:100}))),k=(0,n.ZP)(r.Z)((({theme:e})=>({}))),R=(0,n.ZP)("span")((({theme:e})=>({border:"1px solid currentColor",borderRadius:"50%",padding:e.spacing(.75),display:"flex",alignItems:"center",justifyContent:"center"}))),z=({actions:e=[],ResponsiveActionComponent:o=w,responsiveActionProps:t={},ResponsiveActionIcon:n,showResponsiveOnDesktop:s=!1})=>{var r,Z;const j=(0,i.Z)(),b=(0,a.Z)(j.breakpoints.down("sm")),f=(0,u.s0)(),C="actions",{hasSegment:z,addSegment:S,removeSegment:F}=(0,m.Z)(),V=(0,g.Z)(),I=({children:o})=>e.length>1?(0,v.jsx)(v.Fragment,{children:o}):(0,v.jsx)(l.Z,{direction:"up",in:!V,mountOnEnter:!0,unmountOnExit:!0,children:o});return s||b?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(I,{children:(0,v.jsx)(o,{onClick:e.length>1?()=>f(S(C)):null===(r=e[0])||void 0===r?void 0:r.onClick,...t,children:e.length>1?n:null===(Z=e[0])||void 0===Z?void 0:Z.icon})}),e.length>0&&(0,v.jsx)(y.Z,{dialogProps:{fullWidth:!0,maxWidth:"xs"},open:z(C),onClose:()=>f(F(C),{replace:!0}),children:(0,v.jsx)(d.Z,{children:(0,v.jsx)(c.ZP,{container:!0,columns:3,children:e.map(((e,o)=>(0,v.jsx)(x.FY,{authorize:e.authorize,children:(0,v.jsx)(c.ZP,{item:!0,xs:1,alignItems:"center",justifyContent:"center",children:(0,v.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,v.jsx)(P,{label:e.title,onClick:e.onClick,size:"large",color:"inherit",labelTypographyProps:{sx:{mt:1}},children:(0,v.jsx)(R,{children:e.icon})})})})},o)))})})})]}):(0,v.jsx)(k,{children:(0,v.jsx)(h.Z,{direction:b?"row-reverse":"row",spacing:1,children:e.map(((e,o)=>(0,v.jsx)(x.FY,{authorize:e.authorize,children:(0,v.jsx)(p.Z,{variant:"transparent",disableElevation:!0,startIcon:e.icon,onClick:e.onClick,...e.buttonProps,children:e.title})},o)))})})}},85379:(e,o,t)=>{t.r(o),t.d(o,{default:()=>he});var n=t(42419),s=t(4390),r=t(68870),i=t(36314),a=t(57621),l=t(94721),d=t(25506),c=t.n(d),h=t(64286),p=t.n(h),u=t(58518),x=t(11087),g=t(64742),m=t(46019),Z=t(11692),j=t(61709),v=t(7175),b=t(42239),f=t(99519),C=t(59505),P=t(72791),y=t(68155),w=t(80184);const k=({open:e,onClose:o,role:t,onDelete:n,requestConfig:s,...r})=>{const i=(0,g.dp)("Roles.Main"),[a,l]=(0,P.useState)(!1);(0,P.useEffect)((()=>{e&&l(!1)}),[e]);return(0,w.jsx)(y.Z,{open:e,onClose:o,...r,title:"\u0646\u0642\u0634 \u062d\u0630\u0641 \u06af\u0631\u062f\u062f\u061f",content:"\u0646\u0642\u0634 \u0628\u0631\u0627\u06cc \u0647\u0645\u06cc\u0634\u0647 \u062d\u0630\u0641 \u06af\u0631\u062f\u062f\u061f",onConfirm:async()=>{l(!0);try{const e=await i.delete(t.id,s);l(!1),e.ok&&n()}catch(e){console.log(e)}},confirmButtonProps:{color:"error"},cancelButtonProps:{autoFocus:!0},confirmText:"\u062d\u0630\u0641 \u0628\u0631\u0627\u06cc \u0647\u0645\u06cc\u0634\u0647",loading:a,confirmIcon:(0,w.jsx)(C.Z,{})})};var R=t(77907),z=t(98937),S=t(81598),F=t(5982),V=t(78117),I=t(53329),O=t(39709),W=t(76278),E=t(49900),M=t(56125),D=t(90493),L=t(57064),A=t(20890),H=t(65661),T=t(13400),N=t(97123),q=t(26411),G=t(70697),$=t(45109),U=t(54163);const B=({module:e,value:o=[],onChange:t=(()=>{})})=>{const[n,s]=(0,P.useState)(!1),r=e=>o.filter((o=>o.id===e.id)).length>0;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)(W.Z,{onClick:()=>s(!n),children:[(0,w.jsx)(E.Z,{primary:(0,w.jsx)("strong",{children:e.name})}),n?(0,w.jsx)(F.Z,{}):(0,w.jsx)(V.Z,{})]}),(0,w.jsx)(M.Z,{in:n,timeout:"auto",unmountOnExit:!0,children:(0,w.jsx)(D.Z,{dense:!0,component:"div",disablePadding:!0,children:e.permissions.map(((e,n)=>(0,w.jsxs)(W.Z,{sx:{pl:4},onClick:()=>{var n;t(r(n=e)?o.filter((e=>e.id!==n.id)):[...o,n])},children:[(0,w.jsx)(L.Z,{children:r(e)?(0,w.jsx)(R.Z,{}):(0,w.jsx)(z.Z,{})}),(0,w.jsx)(E.Z,{primary:e.name})]},n)))})})]})},Y=({value:e,onChange:o})=>{const t=(0,g.dp)("Core.Workspace"),{data:n,loading:s,reload:r}=(0,$.Z)({handler:()=>t.modules({whereHasPermissions:!0}),initialState:{data:{data:[],total:0},loading:!0}}),{data:i}=n;return s?(0,w.jsx)(A.Z,{variant:"subtitle2",fontWeight:400,sx:{p:2,textAlign:"center"},children:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc..."}):(0,w.jsx)(D.Z,{dense:!0,children:i.map(((t,n)=>(0,w.jsx)(B,{module:t,value:e,onChange:o},n)))})},J=({open:e,onClose:o,defaultValues:t={},onCreateOrUpdate:n})=>{const{inject:s}=(0,m.aC)(),i=(0,g.dp)("Roles.Main"),a={name:"",access:[],...Object.assign({},...s("Roles","RoleForm.initialValues")||[]),...t},{register:d,loading:c,handleSubmit:h,reset:p,getValue:u,setValue:x}=(0,U.Z)({initialValues:a,handlePost:e=>i.createOrUpdate(e),onSubmit:n});(0,P.useEffect)((()=>{e&&p(a)}),[e]);const Z=Object.assign({},...s("Roles","RoleForm.Hooks")||[]);return(0,w.jsxs)(q.Z,{open:e,onClose:o,dialogProps:{fullWidth:!0,maxWidth:"xs"},children:[(0,w.jsxs)("form",{noValidate:!0,onSubmit:h,children:[(0,w.jsxs)(H.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,w.jsx)(r.Z,{children:t.id?"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0645\u0634\u062e\u0635\u0627\u062a \u0646\u0642\u0634":"\u062b\u0628\u062a \u0645\u0634\u062e\u0635\u0627\u062a \u0646\u0642\u0634"}),(0,w.jsx)(T.Z,{onClick:o,size:"small",children:(0,w.jsx)(S.Z,{})})]}),(0,w.jsx)(l.Z,{}),(0,w.jsxs)(r.Z,{sx:{p:0},children:[(0,w.jsx)(r.Z,{sx:{p:2},children:(0,w.jsx)(G.Z,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",variant:"filled",label:"\u0646\u0627\u0645 \u0646\u0642\u0634",placeholder:"\u0645\u062f\u06cc\u0631 \u06a9\u0644\u060c \u0645\u062f\u06cc\u0631 \u0641\u0631\u0648\u0634\u060c \u0645\u0646\u0634\u06cc \u062f\u0641\u062a\u0631 \u06cc\u0627...",required:!0,...d("name")})}),(0,w.jsx)(l.Z,{}),(0,w.jsx)(A.Z,{fontWeight:"bold",sx:{m:2,mb:0},children:"\u0645\u062c\u0648\u0632\u0647\u0627\u06cc \u0646\u0642\u0634"}),(0,w.jsx)(Y,{value:u("access").map((e=>e.permission)),onChange:e=>x("access",e.map((e=>({permission:e}))))}),s("Roles","RoleForm.PostForm",{register:d,loading:c,getValue:u,setValue:x,reset:p,...Z})]}),(0,w.jsx)(l.Z,{}),(0,w.jsxs)(N.Z,{children:[(0,w.jsx)(O.Z,{loading:c,loadingPosition:"start",type:"submit",variant:"contained",startIcon:(0,w.jsx)(I.Z,{}),children:"\u062b\u0628\u062a \u0645\u0634\u062e\u0635\u0627\u062a"}),(0,w.jsx)(r.Z,{sx:{flexGrow:1}})]})]}),s("Roles","RoleForm.Footer",{register:d,loading:c,getValue:u,setValue:x,reset:p,...Z})]})};var K=t(82271),Q=t(88471),X=t(57689),_=t(78925),ee=t(75669),oe=t(90577),te=t(26182);const ne=({loading:e,roles:o,meta:t,infiniteScrollProps:n,onClickEdit:s,onClickDelete:r})=>{const i=(0,X.s0)(),a=(0,X.TH)(),[l,d]=(0,x.lr)(),[c,h]=(0,P.useState)(l.has("sort")?l.get("sort"):"-createdAt");(0,oe.Z)((()=>{d({...Object.fromEntries(l),sort:c})}),[c]);const p=(0,te.Z)();return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(_.Z,{data:o,loading:e,infiniteScrollProps:n,definitions:[{title:"\u0631\u062f\u06cc\u0641",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:100},renderCell:(e,o)=>(0,w.jsx)(ee.Z,{children:p(o)})},{field:"code",title:"\u0646\u0642\u0634",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:100},render:e=>(0,w.jsx)(ee.Z,{children:e.name})||"-"},{title:"\u0645\u062c\u0648\u0632\u200c\u0647\u0627",rowCellProps:{width:400},render:e=>(0,w.jsx)(ee.Z,{children:e.access.map((e=>e.permission.name)).join(", ")})}],renderSheetTitle:e=>(0,w.jsx)(ee.Z,{children:e.subject}),renderListItemChildren:e=>(0,w.jsx)(W.Z,{onClick:()=>i("/roles/".concat(e.id),{state:{prev:a}}),children:(0,w.jsx)(E.Z,{primary:(0,w.jsx)("strong",{children:e.fullName})})}),tableRowProps:e=>({hover:!0,striped:!0,onClick:()=>i("/roles/".concat(e.id),{state:{prev:a}})}),paginationProps:{count:t.total,rowsPerPage:l.get("perPage")||25,page:l.get("page")||0,onPageChange:(e,o)=>d({...Object.fromEntries([...l]),page:o}),onRowsPerPageChange:e=>d({...Object.fromEntries([...l]),perPage:e.target.value})},actions:[{title:"\u0648\u06cc\u0631\u0627\u06cc\u0634",icon:(0,w.jsx)(Q.Z,{}),onClick:s},{title:"\u062d\u0630\u0641",icon:(0,w.jsx)(K.Z,{}),onClick:e=>r(e,!1)}]})})};var se=t(5403),re=t(66934),ie=t(85818),ae=t(37398);const le=(0,re.ZP)(se.Z)((({theme:e})=>({color:e.palette.text.secondary}))),de=(0,re.ZP)(ie.ZP)((({theme:e})=>({fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.button.fontSize}))),ce=()=>{const[e,o]=(0,x.lr)(),[t,n]=(0,P.useState)(e.get("query")||""),s=(0,ae.Z)(t,500);return(0,oe.Z)((()=>{o({query:s})}),[s]),(0,w.jsx)(r.Z,{sx:{px:2,py:1.5,display:"flex"},children:(0,w.jsxs)(r.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},children:[(0,w.jsx)(le,{sx:{mr:1},color:"inherit"}),(0,w.jsx)(de,{value:t,placeholder:"\u062c\u0633\u062a\u062c\u0648 \u0646\u0627\u0645 \u0646\u0642\u0634...",onChange:e=>n(e.target.value),sx:{flexGrow:1}})]})})},he=()=>{const{inject:e}=(0,m.aC)(),o=(0,g.dp)("Roles.main"),[t]=(0,x.lr)(),{data:d,total:h,loading:C,loadMore:P,reload:y}=(0,f.Z)({handleFetch:e=>o.list({...e,...Object.fromEntries([...t])}),loadDeps:[t],infiniteScrollDefaultParams:{page:t.has("page")?t.get("page"):0,perPage:t.has("perPage")?t.get("perPage"):25}}),{enqueueSnackbar:R}=(0,u.Ds)(),[z,S,F]=(0,b.Z)("form"),V=e=>{R(e),y(),F()},[I,O,W]=(0,b.Z)("delete",{hashDeps:["role"]}),E=Object.assign({},...e("Roles","RolesList.Hooks")||[]),M=(0,g.Vg)("Roles.manage");return(0,w.jsx)(v.xf,{...M,children:(0,w.jsxs)(j.Z,{children:[(0,w.jsxs)(r.Z,{sx:{display:"flex",mb:{xs:0,sm:1}},children:[(0,w.jsx)(r.Z,{sx:{flexGrow:1}}),(0,w.jsx)(i.Z,{direction:"row",spacing:1,children:(0,w.jsx)(Z.Z,{actions:p()([{title:"\u0646\u0642\u0634 \u062c\u062f\u06cc\u062f",icon:(0,w.jsx)(n.Z,{}),onClick:()=>{S({onCreateOrUpdate:()=>V("\u0646\u0642\u0634 \u062b\u0628\u062a \u06af\u0631\u062f\u06cc\u062f.")})},priority:100},...c()(e("Roles","RolesList.ActionsList",{data:d,loading:C,reload:y,...E})||[])],(e=>e.priority)),ResponsiveActionIcon:(0,w.jsx)(s.Z,{}),responsiveActionProps:{color:"primary"}})})]}),(0,w.jsxs)(a.Z,{variant:"outlined",sx:{flexGrow:1},children:[(0,w.jsx)(ce,{}),(0,w.jsx)(l.Z,{}),(0,w.jsx)(ne,{roles:d,loading:C,meta:{total:h},infiniteScrollProps:{loading:!1,hasNextPage:d.length<h,onLoadMore:P},onClickEdit:e=>{S({defaultValues:e,onCreateOrUpdate:()=>V("\u0646\u0642\u0634 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u06af\u0631\u062f\u06cc\u062f.")})},onClickDelete:e=>{O({role:e})}})]}),(0,w.jsx)(J,{...z}),(0,w.jsx)(k,{...I,onDelete:()=>{R("\u0646\u0642\u0634 \u062d\u0630\u0641 \u06af\u0631\u062f\u06cc\u062f"),W(),y()}}),e("Roles","RolesList.Footer",{data:d,loading:C,reload:y,...E})]})})}},5982:(e,o,t)=>{var n=t(64836);o.Z=void 0;var s=n(t(45649)),r=t(80184),i=(0,s.default)((0,r.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"}),"ExpandLessOutlined");o.Z=i},4390:(e,o,t)=>{var n=t(64836);o.Z=void 0;var s=n(t(45649)),r=t(80184),i=(0,s.default)((0,r.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"MenuOutlined");o.Z=i},49877:(e,o,t)=>{t.d(o,{Z:()=>v});var n=t(63366),s=t(87462),r=t(72791),i=t(28182),a=t(94419),l=t(95080),d=t(14036),c=t(31402),h=t(75878),p=t(21217);function u(e){return(0,p.Z)("MuiFab",e)}const x=(0,h.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var g=t(66934),m=t(80184);const Z=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],j=(0,g.ZP)(l.Z,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,g.FO)(e)||"classes"===e,overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,o[t.variant],o[`size${(0,d.Z)(t.size)}`],"inherit"===t.color&&o.colorInherit,o[(0,d.Z)(t.size)],o[t.color]]}})((({theme:e,ownerState:o})=>{var t,n;return(0,s.Z)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(t=(n=e.palette).getContrastText)?void 0:t.call(n,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${x.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===o.size&&{width:40,height:40},"medium"===o.size&&{width:48,height:48},"extended"===o.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===o.variant&&"small"===o.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===o.variant&&"medium"===o.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===o.color&&{color:"inherit"})}),(({theme:e,ownerState:o})=>(0,s.Z)({},"inherit"!==o.color&&"default"!==o.color&&null!=(e.vars||e).palette[o.color]&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}}})),(({theme:e})=>({[`&.${x.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),v=r.forwardRef((function(e,o){const t=(0,c.Z)({props:e,name:"MuiFab"}),{children:r,className:l,color:h="default",component:p="button",disabled:x=!1,disableFocusRipple:g=!1,focusVisibleClassName:v,size:b="large",variant:f="circular"}=t,C=(0,n.Z)(t,Z),P=(0,s.Z)({},t,{color:h,component:p,disabled:x,disableFocusRipple:g,size:b,variant:f}),y=(e=>{const{color:o,variant:t,classes:n,size:r}=e,i={root:["root",t,`size${(0,d.Z)(r)}`,"inherit"===o?"colorInherit":o]},l=(0,a.Z)(i,u,n);return(0,s.Z)({},n,l)})(P);return(0,m.jsx)(j,(0,s.Z)({className:(0,i.default)(y.root,l),component:p,disabled:x,focusRipple:!g,focusVisibleClassName:(0,i.default)(y.focusVisible,v),ownerState:P,ref:o},C,{classes:y,children:r}))}))}}]);
//# sourceMappingURL=5379.83420f42.chunk.js.map