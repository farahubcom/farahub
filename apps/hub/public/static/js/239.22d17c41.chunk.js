"use strict";(globalThis.webpackChunkfarahub=globalThis.webpackChunkfarahub||[]).push([[239],{20239:(e,s,l)=>{l.r(s),l.d(s,{default:()=>fe});var n=l(68870),r=l(57689),a=l(13967),t=l(66934),i=l(85818),o=l(35065),d=l(54163),c=l(80184);const x=(0,t.ZP)(i.ZP)((({theme:e})=>({...e.typography.button,padding:e.spacing(1.5,2),flexGrow:1,transition:"all .16s ease-in-out",borderRadius:e.shape.borderRadius,border:"1px solid ".concat(e.palette.grey[200]),"&.Mui-focused":{borderColor:e.palette.grey[500]}}))),p=({defaultValues:e,requestConfig:s,onCreateOrUpdate:l,autoFocus:r})=>{const a=(0,o.dp)("Tasks.Lists"),t={name:"",...e},{register:i,reset:p,handleSubmit:u}=(0,d.Z)({initialValues:t,handlePost:e=>a.createOrUpdate(e,s),onSubmit:e=>{l(e),p(t)}});return(0,c.jsx)(n.Z,{component:"form",sx:{display:"flex",backgroundColor:"grey.100"},onSubmit:u,children:(0,c.jsx)(x,{placeholder:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0644\u06cc\u0633\u062a...",inputProps:{style:{padding:0}},autoFocus:r,...i("name",["FormHelperTextProps","error","helperText"])})})};var u=l(46778),h=l(82271),m=l(88471),j=l(65482),g=l(57621),Z=l(31378),b=l(20890),f=l(13400),P=l(39504),C=l(71715),y=l(23786),S=l(57064),v=l(49900),k=l(72791);const w=(0,t.ZP)(i.ZP)((({theme:e})=>({...e.typography.button,padding:e.spacing(1.5,2),flexGrow:1,transition:"all .16s ease-in-out",borderRadius:e.shape.borderRadius,border:"1px solid ".concat(e.palette.grey[200]),"&.Mui-focused":{borderColor:e.palette.grey[500]}}))),z=({defaultValues:e,requestConfig:s,onCreateOrUpdate:l})=>{const r=(0,o.dp)("Tasks.Cards"),a={name:"",...e},{register:t,reset:i,handleSubmit:x}=(0,d.Z)({initialValues:a,handlePost:e=>r.createOrUpdate(e,s),onSubmit:e=>{l(e),i(a)}});return(0,c.jsx)(n.Z,{component:"form",sx:{display:"flex",backgroundColor:"grey.100"},onSubmit:x,children:(0,c.jsx)(w,{sx:{py:1},placeholder:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0648\u0638\u06cc\u0641\u0647...",inputProps:{style:{padding:0}},...t("name",["FormHelperTextProps","error","helperText"])})})};var O=l(57817),q=l(48110),F=l(26386),R=l(11228),I=l(81598),V=l(65661),T=l(94721),L=l(39157),M=l(61889),N=l(97123),U=l(36151),_=l(36571),A=l(57870),D=l(26411),G=l(66770),W=l.n(G),E=l(11901),H=l(94965),Y=l(83027),B=l(83708),J=l(44978),K=l(79820);const Q=(0,t.ZP)(n.Z,{shouldForwardProp:e=>!["styleOverrides","readOnly"].includes(e)})((({theme:e,styleOverrides:s,readOnly:l})=>({"& .ql-container":{boxSizing:"border-box",fontFamily:e.typography.fontFamily,fontSize:e.typography.fontSize,height:"100%",margin:0,position:"relative",...s&&s.container},"& .ql-editor":{boxSizing:"border-box",height:"100%",outline:"none",overflowY:"auto",padding:l?"1px 0":"12px 15px",tabSize:4,textAlign:"left",whiteSpace:"pre-wrap",wordWrap:"break-word","& p, & ol, & ul, & pre, & blockquote, & h1, & h2, & h3, & h4, & h5, & h6":{margin:0,padding:0,counterReset:"list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9"},"& ol, & ul":{listStylePosition:"inside"},"> *":{cursor:"text"},...s&&s.editor},".ql-clipboard":{left:"-100000px",height:"1px",overflowY:"hidden",position:"absolute",top:"50%","& p":{margin:0,padding:0}},".ql-editor.ql-blank":{"&::before":{color:"rgba(0,0,0,0.6)",content:"attr(data-placeholder)",fontStyle:"",left:"15px",pointerEvents:"none",position:"absolute",right:"15px"}}}))),X=(0,k.forwardRef)((({disabled:e},s)=>(0,c.jsxs)(n.Z,{ref:s,sx:e=>({p:1,display:"flex",background:e.palette.grey[100],transition:"all .16s ease-in-out"}),children:[(0,c.jsxs)("span",{className:"",children:[(0,c.jsx)(f.Z,{size:"small",color:"inherit",className:"ql-bold",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(E.Z,{fontSize:"small"})}),(0,c.jsx)(f.Z,{size:"small",color:"inherit",className:"ql-italic",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(H.Z,{fontSize:"small"})}),(0,c.jsx)(f.Z,{size:"small",color:"inherit",className:"ql-underline",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(B.Z,{fontSize:"small"})}),(0,c.jsx)(f.Z,{size:"small",color:"inherit",className:"ql-strike",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(Y.Z,{fontSize:"small"})})]}),(0,c.jsx)(T.Z,{orientation:"vertical",flexItem:!0,variant:"middle"}),(0,c.jsxs)("span",{className:"",children:[(0,c.jsx)(f.Z,{size:"small",color:"inherit",className:"ql-list",value:"ordered",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(K.Z,{fontSize:"small"})}),(0,c.jsx)(f.Z,{size:"small",color:"inherit",className:"ql-list",value:"bullet",disabled:e,sx:{transition:"all .16s ease-in-out"},children:(0,c.jsx)(J.Z,{fontSize:"small"})})]})]}))),$=(0,k.forwardRef)((({value:e,onChange:s,containerProps:l,modules:n={},disabled:r=!1,readOnly:a=!1,toolbarPlacement:t="top",...i},o)=>{const[d,x]=(0,k.useState)(),p=(0,k.useMemo)((()=>({toolbar:{container:d},...n})),[d]),u=(0,c.jsx)(W(),{ref:o,theme:!1,value:e,onChange:(e,l,n)=>s&&s(e),modules:p,readOnly:a,...i});return(0,c.jsx)(Q,{readOnly:a,...l,children:a?u:(0,c.jsxs)(c.Fragment,{children:["top"===t&&(0,c.jsx)(X,{ref:x,disabled:r}),!!d&&u,"bottom"===t&&(0,c.jsx)(X,{ref:x,disabled:r})]})})}));var ee=l(70697),se=l(77907),le=l(98937),ne=l(5403),re=l(76278),ae=l(63466),te=l(78925),ie=l(75669),oe=l(37398),de=l(26182),ce=l(99519);const xe=({loading:e,meta:s,lists:l,selected:n,onSelect:r,infiniteScrollProps:a,page:t,perPage:i,onPageChange:o,onPerPageChange:d})=>{const x=(0,de.Z)(),p=e=>!!n&&(Array.isArray(n)?n.filter((s=>s.id===e.id)).length>0:n.id===e.id);return(0,c.jsx)(te.Z,{data:l,loading:e,infiniteScrollProps:a,definitions:[{headerCellProps:{align:"center"},rowCellProps:{align:"center",width:25},renderCell:(e,s)=>(0,c.jsx)("div",{children:p(e)?(0,c.jsx)(se.Z,{}):(0,c.jsx)(le.Z,{})})},{title:"\u0631\u062f\u06cc\u0641",headerCellProps:{align:"center",width:100},rowCellProps:{align:"center"},renderCell:(e,s)=>(0,c.jsx)(ie.Z,{children:x(s)})},{title:"\u0644\u06cc\u0633\u062a",field:"name",render:e=>(0,c.jsx)(ie.Z,{children:e.name})}],renderSheetTitle:e=>e.name,renderListItemChildren:(e,s)=>(0,c.jsxs)(re.Z,{selected:p(e),onClick:()=>r(e),children:[(0,c.jsx)(S.Z,{children:p(e)?(0,c.jsx)(se.Z,{}):(0,c.jsx)(le.Z,{})}),(0,c.jsx)(v.Z,{primary:(0,c.jsx)("strong",{children:e.name})})]},s),tableRowProps:e=>({hover:!0,striped:!1,selected:p(e),onClick:s=>r(e)}),paginationProps:{count:s.total,rowsPerPage:i||25,page:t||0,onPageChange:(e,s)=>o(s),onRowsPerPageChange:e=>d(e.target.value)},listItemProps:{disablePadding:n},listProps:{disablePadding:!n}})},pe=({open:e,boardId:s,onClose:l,selected:r,onSelect:a,onClear:t})=>{const i=(0,o.dp)("Tasks.Lists"),[d,x]=(0,k.useState)(""),p=(0,oe.Z)(d,500),[u,h]=(0,k.useState)({page:0,perPage:25}),{data:m,total:j,loading:g,loadMore:Z,reload:b}=(0,ce.Z)({handleFetch:e=>i.list({boardId:s,...e,...u,query:p}),loadDeps:[e,u,p],infiniteScrollDefaultParams:u});return(0,c.jsxs)(D.Z,{open:e,onClose:l,dialogProps:{fullWidth:!0,maxWidth:"sm"},children:[(0,c.jsxs)(V.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsx)(n.Z,{children:"\u0627\u0646\u062a\u062e\u0627\u0628 \u0644\u06cc\u0633\u062a"}),(0,c.jsx)(f.Z,{onClick:l,size:"small",children:(0,c.jsx)(I.Z,{})})]}),(0,c.jsx)(T.Z,{}),(0,c.jsx)(n.Z,{sx:{p:2},children:(0,c.jsx)(ee.Z,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",label:"\u062c\u0633\u062a\u062c\u0648 \u0639\u0646\u0648\u0627\u0646 \u0644\u06cc\u0633\u062a...",variant:"filled",value:d,onChange:e=>x(e.target.value),InputProps:{startAdornment:(0,c.jsx)(ae.Z,{position:"start",children:(0,c.jsx)(ne.Z,{})})}})}),(0,c.jsx)(xe,{loading:g,lists:m,meta:{total:j},selected:r,onSelect:a,infiniteScrollProps:{loading:!1,hasNextPage:m.length<j,onLoadMore:Z},page:u.page,perPage:u.perPage,onPageChange:e=>h({...u,page:e}),onPerPageChange:e=>h({...u,perPage:e})}),(0,c.jsx)(T.Z,{}),(0,c.jsxs)(N.Z,{children:[t&&(0,c.jsx)(U.Z,{type:"button",onClick:t,children:"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646"}),(0,c.jsx)(n.Z,{sx:{flexGrow:1}})]})]})},ue=({value:e,onChange:s,onSubmit:l,...r})=>{const a=(0,k.useRef)(null),[t,o]=(0,k.useState)();return(0,k.useEffect)((()=>{t&&a.current&&a.current.select()}),[t]),t?(0,c.jsx)(Z.Z,{onClickAway:e=>{o(!1),l()},children:(0,c.jsx)(n.Z,{...r,component:"form",onSubmit:e=>{e.preventDefault(),o(!1),l()},children:(0,c.jsx)(i.ZP,{inputRef:a,value:e,onChange:e=>s(e.target.value),sx:{width:"100%"}})})}):(0,c.jsx)(n.Z,{...r,onClick:e=>2===e.detail&&o(!0),children:e})},he=({value:e,onChange:s,onSubmit:l,...r})=>{const a=(0,k.useRef)(null),[t,i]=(0,k.useState)();return(0,k.useEffect)((()=>{t&&a.current&&a.current.focus()}),[t]),t?(0,c.jsx)(Z.Z,{onClickAway:e=>{i(!1),l()},children:(0,c.jsx)(n.Z,{...r,children:(0,c.jsx)($,{ref:a,value:e,onChange:s,placeholder:"\u0627\u06cc\u0646\u062c\u0627 \u0634\u0631\u062d \u062f\u0647\u06cc\u062f...",containerProps:{styleOverrides:{editor:{minHeight:100}}}})})}):(0,c.jsx)(n.Z,{...r,sx:{p:2},onClick:e=>2===e.detail&&i(!0),children:(0,c.jsx)($,{readOnly:!0,value:e,placeholder:"\u0627\u06cc\u0646\u062c\u0627 \u0634\u0631\u062d \u062f\u0647\u06cc\u062f...",modules:{toolbar:!1},containerProps:{styleOverrides:{editor:{minHeight:100}}}})})},me=({open:e,onClose:s,card:l={},onModify:r=(()=>{})})=>{const[a,t]=(0,k.useState)(!1),[i,x]=(0,k.useState)(!1),[p,u]=(0,k.useState)({open:!1}),h=(0,o.dp)("Tasks.Cards"),m={name:"",description:"",list:"",dueDate:null,...l},{getValue:j,setValue:g,handleSubmit:Z}=(0,d.Z)({initialValues:m,handlePost:e=>h.createOrUpdate(e),onSubmit:e=>{r(e),a&&t(!1),i&&x(!1),p.open&&u({open:!1})}});return(0,k.useEffect)((()=>{Z()}),[j("list"),j("dueDate")]),(0,c.jsxs)(D.Z,{open:e,onClose:s,dialogProps:{fullWidth:!0,maxWidth:"sm"},children:[(0,c.jsxs)(V.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,c.jsx)(ue,{value:j("name"),onChange:e=>g("name",e),onSubmit:Z,sx:{flexGrow:1}}),(0,c.jsx)(f.Z,{onClick:s,size:"small",children:(0,c.jsx)(I.Z,{})})]}),(0,c.jsx)(T.Z,{}),(0,c.jsxs)(L.Z,{sx:{p:0},children:[(0,c.jsx)(he,{value:j("description"),onChange:e=>g("description",e),onSubmit:Z}),(0,c.jsx)(T.Z,{}),(0,c.jsx)(n.Z,{sx:{p:2},children:(0,c.jsx)(M.ZP,{container:!0,children:(0,c.jsx)(M.ZP,{item:!0,xs:6,children:(0,c.jsx)(_._,{dateAdapter:R.Z,children:(0,c.jsx)(A.x,{disablePast:!0,label:"\u062a\u0627\u0631\u06cc\u062e \u0627\u0646\u062c\u0627\u0645",mask:"____/__/__",renderInput:e=>(0,c.jsx)(ee.Z,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",...e}),value:j("dueDate"),onChange:e=>g("dueDate",e)})})})})})]}),(0,c.jsx)(T.Z,{}),(0,c.jsxs)(N.Z,{children:[(0,c.jsx)(U.Z,{variant:"contained",onClick:()=>u({open:!0}),children:"\u0627\u0646\u062a\u0642\u0627\u0644"}),(0,c.jsx)(n.Z,{sx:{flexGrow:1}})]}),(0,c.jsx)(pe,{boardId:l.board,...p,selected:l.list,onClose:Z,onSelect:e=>g("list",e)})]})},je=({card:e={},menuProps:s={},onModify:l=(()=>{})})=>{const a=(0,r.s0)(),{addSegment:t,hasSegment:i,removeSegment:o}=(0,F.Z)();return(0,c.jsxs)(g.Z,{variant:"outlined",sx:{mb:1},children:[(0,c.jsxs)(n.Z,{sx:{px:2,py:1,backgroundColor:"grey.100",display:"flex",cursor:"pointer",alignItems:"center"},onClick:()=>a(t(e.id)),children:[(0,c.jsx)(b.Z,{variant:"button",sx:{flexGrow:1},children:e.name}),e.dueDate&&(0,c.jsx)(q.Z,{fontSize:"small",color:"disabled"}),e.description&&(0,c.jsx)(O.Z,{fontSize:"small",color:"disabled",sx:{ml:1}})]}),(0,c.jsx)(me,{card:e,open:i(e.id),onClose:()=>a(o(e.id),{replace:!0}),onModify:l})]})},ge=({list:e={cards:[]},cardFormProps:s={},onRenameList:l=(()=>{}),cardProps:r={}})=>{const[a,t]=(0,k.useState)(!1),[i,o]=(0,k.useState)(null);return(0,c.jsxs)(g.Z,{variant:"outlined",children:[a?(0,c.jsx)(Z.Z,{onClickAway:()=>t(!1),children:(0,c.jsx)(n.Z,{children:(0,c.jsx)(p,{defaultValues:e,onCreateOrUpdate:()=>{t(!1),l()},autoFocus:!0})})}):(0,c.jsxs)(n.Z,{sx:{px:2,py:1.5,backgroundColor:"grey.100",display:"flex",alignItems:"center"},children:[(0,c.jsx)(b.Z,{variant:"button",sx:{flexGrow:1},children:e.name}),(0,c.jsx)(f.Z,{size:"small",edge:"end",onClick:e=>o(e.currentTarget),children:(0,c.jsx)(j.Z,{})})]}),(0,c.jsxs)(P.Z,{sx:{p:1},children:[e.cards.map(((e,s)=>(0,k.createElement)(je,{...r,card:e,key:s}))),(0,c.jsx)(z,{defaultValues:{list:e.id},...s})]}),(0,c.jsxs)(C.Z,{anchorEl:i,open:Boolean(i),onClose:()=>o(null),children:[(0,c.jsxs)(y.Z,{onClick:()=>{o(null),t(!0)},children:[(0,c.jsx)(S.Z,{children:(0,c.jsx)(m.Z,{fontSize:"small"})}),(0,c.jsx)(v.Z,{children:"\u062a\u063a\u06cc\u06cc\u0631 \u0646\u0627\u0645"})]}),(0,c.jsxs)(y.Z,{children:[(0,c.jsx)(S.Z,{children:(0,c.jsx)(u.Z,{fontSize:"small"})}),(0,c.jsx)(v.Z,{children:"\u0628\u0627\u06cc\u06af\u0627\u0646\u06cc"})]}),(0,c.jsxs)(y.Z,{children:[(0,c.jsx)(S.Z,{children:(0,c.jsx)(h.Z,{fontSize:"small"})}),(0,c.jsx)(v.Z,{children:"\u062d\u0630\u0641"})]})]})]})};var Ze=l(19042);l(4676);const be=({data:e=[],loading:s,cardProps:l={},listFormProps:r={},cardFormProps:t={},onRenameList:i=(()=>{})})=>{const o=(0,a.Z)();return(0,c.jsx)(n.Z,{children:(0,c.jsxs)(Ze.tq,{slidesPerView:1.25,breakpoints:{[o.breakpoints.values.sm]:{slidesPerView:2.25},[o.breakpoints.values.md]:{slidesPerView:3.25},[o.breakpoints.values.lg]:{slidesPerView:4.25},[o.breakpoints.values.sm]:{slidesPerView:5.25}},children:[e.map(((e,s)=>(0,c.jsx)(Ze.o5,{children:(0,c.jsx)(n.Z,{sx:{px:1},children:(0,c.jsx)(ge,{list:e,cardFormProps:t,onRenameList:i,cardProps:l})})},s))),(0,c.jsx)(Ze.o5,{children:(0,c.jsx)(n.Z,{sx:{px:1},children:(0,c.jsx)(p,{...r})})})]})})},fe=e=>{const s=(0,r.UO)(),{board:l,reload:a}=(0,r.bx)();return(0,c.jsx)(n.Z,{sx:{p:2},children:(0,c.jsx)(be,{loading:!1,data:l.lists,cardProps:{onModify:e=>a()},listFormProps:{defaultValues:{board:s.boardId},onCreateOrUpdate:e=>a()},cardFormProps:{onCreateOrUpdate:e=>a()},onRenameList:e=>a()})})}}}]);
//# sourceMappingURL=239.22d17c41.chunk.js.map