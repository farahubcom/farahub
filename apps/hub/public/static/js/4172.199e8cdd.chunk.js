"use strict";(globalThis.webpackChunkfarahub=globalThis.webpackChunkfarahub||[]).push([[4172],{39269:(e,n,r)=>{r.d(n,{Z:()=>D});var s=r(81598),t=r(57250),l=r(63872),a=r(66934),i=r(35855),o=r(68870),d=r(13239),c=r(39281),u=r(79836),h=r(53382),x=r(68745),p=r(93044),g=r(65661),m=r(13400),j=r(94721),Z=r(63466),v=r(97123),b=r(36151),f=r(72791),C=r(37398),y=r(18702),P=r(97002),w=r(70697),k=r(26411),S=r(80184);const M=(0,a.ZP)(i.Z)((({theme:e,hover:n,selected:r})=>({cursor:n?"pointer":"auto",backgroundColor:r?e.palette.action.hover:e.palette.common.white,"&:focus":{backgroundColor:e.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}))),T=({loading:e,modules:n,selected:r,onSelect:s,selectable:t})=>{const a=e=>!(!t||!r)&&(Array.isArray(r)?r.filter((n=>n.id===e.id)).length>0:r.id===e.id);return e?(0,S.jsx)(o.Z,{sx:{px:5,py:5,textAlign:"center"},children:(0,S.jsx)(d.Z,{})}):n.length<1?(0,S.jsxs)(o.Z,{sx:{px:5,py:5,textAlign:"center"},children:[(0,S.jsx)(l.Z,{fontSize:"large"}),(0,S.jsx)("p",{children:"\u0645\u0648\u0631\u062f\u06cc \u062c\u0647\u062a \u0646\u0645\u0627\u06cc\u0634 \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0631\u062f."})]}):(0,S.jsx)(c.Z,{sx:{overflow:"auto",maxHeight:400},children:(0,S.jsx)(u.Z,{stickyHeader:!0,size:"small",children:(0,S.jsx)(h.Z,{children:n.map(((e,n)=>(0,S.jsxs)(M,{selected:a(e),hover:t,onClick:()=>t&&s(e),children:[(0,S.jsx)(x.Z,{align:"center",children:n+1}),(0,S.jsx)(x.Z,{children:(0,S.jsxs)(o.Z,{sx:{display:"flex"},children:[(0,S.jsx)(p.Z,{src:e.picture,variant:"rounded",children:(0,S.jsx)(y.Z,{})}),(0,S.jsxs)(o.Z,{sx:{pl:2},children:[(0,S.jsx)("strong",{children:e.name}),(0,S.jsx)("br",{}),(0,S.jsx)(o.Z,{sx:{fontFamily:"Helvetica"},children:e.identifier})]})]})})]},n)))})})})},D=({open:e,onClose:n,selectable:r,selected:l,onSelect:a,onClear:i,queryParams:d={}})=>{const c=(0,P.dp)("core.modules"),[u,h]=(0,f.useState)(!0),[x,p]=(0,f.useState)([]),[y,M]=(0,f.useState)(""),D=(0,C.Z)(y,500);return(0,f.useEffect)((()=>{if(!e){const e=setTimeout((()=>{h(!0),""!==y&&M("")}),500);return()=>{clearTimeout(e)}}(async()=>{const{ok:e,data:n}=await c.list({...d,query:D,...""===y?{page:0,perPage:100}:{}});e&&(p(n),h(!1))})()}),[e,D]),(0,S.jsxs)(k.Z,{open:e,onClose:n,dialogProps:{fullWidth:!0,maxWidth:"xs"},children:[(0,S.jsxs)(g.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,S.jsx)(o.Z,{children:r?"\u0627\u0646\u062a\u062e\u0627\u0628 \u0645\u0627\u0698\u0648\u0644":"\u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u0627\u0698\u0648\u0644\u200c\u0647\u0627"}),(0,S.jsx)(m.Z,{onClick:n,size:"small",children:(0,S.jsx)(s.Z,{})})]}),(0,S.jsx)(j.Z,{}),(0,S.jsx)(o.Z,{sx:{p:2},children:(0,S.jsx)(w.Z,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",variant:"filled",label:"\u062c\u0633\u062a\u062c\u0648 \u0628\u0631\u0627\u0633\u0627\u0633 \u0646\u0627\u0645",value:y,onChange:e=>M(e.target.value),InputProps:{startAdornment:(0,S.jsx)(Z.Z,{position:"start",children:(0,S.jsx)(t.Z,{})})}})}),(0,S.jsx)(T,{loading:u,modules:x,selectable:r,selected:l,onSelect:a}),(0,S.jsx)(j.Z,{}),(0,S.jsxs)(v.Z,{children:[r&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(b.Z,{type:"button",onClick:n,children:"\u0628\u0633\u062a\u0646"}),(0,S.jsx)(o.Z,{sx:{flexGrow:1}})]}),i&&(0,S.jsx)(b.Z,{type:"button",onClick:i,children:"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646"}),!r&&(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(o.Z,{sx:{flexGrow:1}}),(0,S.jsx)(b.Z,{type:"button",onClick:n,children:"\u0627\u0646\u0635\u0631\u0627\u0641"})]})]})]})}},34172:(e,n,r)=>{r.r(n),r.d(n,{default:()=>N});var s=r(4830),t=r(69964),l=r(68870),a=r(36314),i=r(36151),o=r(93044),d=r(20653),c=r(49900),u=r(67317),h=r(11838),x=r(72791),p=r(57689),g=r(11087),m=r(97002),j=r(78925),Z=r(75669),v=r(26182),b=r(99519),f=r(53329),C=r(39709),y=r(66934),P=r(35527),w=r(5574),k=r(65661),S=r(94721),M=r(19658),T=r(61889),D=r(20890),H=r(97123),F=r(14689),I=r.n(F),z=r(72034),V=r.n(z),W=r(58518),O=r(61134),E=r(70697),q=r(73891),A=r(39269),L=r(80184);const Y=[{name:"\u0622\u0632\u0645\u0627\u06cc\u0634\u06cc",value:"demo"},{name:"\u0634\u0634\u200c \u0645\u0627\u0647\u0647",value:"semi-annually"},{name:"\u06cc\u06a9\u200c \u0633\u0627\u0644\u0647",value:"annually"},{name:"\u0645\u0627\u062f\u0627\u0645\u200c\u0627\u0644\u0639\u0645\u0631",value:"lifetime"}],G=(0,y.ZP)(P.Z,{shouldForwardProp:e=>"selected"!==e})((({theme:e,selected:n})=>({display:"inline-block",padding:e.spacing(1,3),cursor:"pointer",outline:"1px solid transparent",transition:e.transitions.create("all"),...n&&{borderColor:e.palette.primary.main,outlineColor:e.palette.primary.main,"& .MuiTypography-root":{fontWeight:700}}}))),U=({open:e,onClose:n,workspace:r,onSave:s=(()=>{})})=>{const t=(0,m.dp)("core.workspaces"),o={modules:[],period:"annually"},{control:d,register:c,handleSubmit:u,formState:{errors:h},setValue:p,reset:g,setError:j}=(0,O.cI)({defaultValues:o}),Z=(0,O.qo)({control:d,name:"period"}),v=(0,O.qo)({control:d,name:"modules"}),[b,y]=(0,x.useState)(!1);(0,x.useEffect)((()=>{if(!e){const e=setTimeout((()=>{g(o)}),500);return()=>{clearTimeout(e)}}}),[e,r]);const{enqueueSnackbar:P}=(0,W.Ds)(),{isOpen:F,open:z,close:U}=(0,q.Z)();return(0,L.jsxs)(w.Z,{open:e,onClose:n,fullWidth:!0,maxWidth:"sm",children:[(0,L.jsx)(k.Z,{children:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0631\u0646\u0627\u0645\u0647 \u062c\u062f\u06cc\u062f"}),(0,L.jsx)(S.Z,{}),(0,L.jsxs)(l.Z,{sx:{p:2},children:[(0,L.jsx)(M.Z,{variant:"outlined",color:"warning",sx:{mb:2},children:"\u067e\u0633 \u0627\u0632 \u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u0647\u0627\u06cc \u062c\u062f\u06cc\u062f \u0628\u0647 \u0645\u06cc\u0632 \u06a9\u0627\u0631\u060c \u062d\u062a\u0645\u0627 \u0633\u0631\u0648\u0631 \u0628\u0627\u06cc\u062f \u0631\u06cc\u0633\u062a\u0627\u0631\u062a \u06af\u0631\u062f\u062f."}),(0,L.jsxs)(T.ZP,{container:!0,spacing:2,children:[(0,L.jsx)(T.ZP,{item:!0,xs:12,md:12,children:(0,L.jsx)(E.Z,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",label:"\u0628\u0631\u0646\u0627\u0645\u0647\u200c\u0647\u0627",variant:"filled",value:v?V()(v,"name"):"",onChange:()=>{},inputProps:{readOnly:!0},onFocus:()=>z(),onClick:()=>z(),onKeyDown:e=>13===e.keyCode&&z()})}),(0,L.jsx)(T.ZP,{item:!0,xs:12,md:12,justifyContent:"center",display:"flex",children:(0,L.jsx)(a.Z,{gap:1,flexDirection:"row",children:Y.map(((e,n)=>(0,L.jsx)(G,{variant:"outlined",selected:Z===e.value,onClick:()=>p("period",e.value),children:(0,L.jsx)(D.Z,{children:e.name})},n)))})})]})]}),(0,L.jsx)(S.Z,{}),(0,L.jsxs)(H.Z,{children:[(0,L.jsx)(C.Z,{loading:b,loadingPosition:"start",type:"submit",variant:"contained",startIcon:(0,L.jsx)(f.Z,{}),onClick:u((async e=>{y(!0);const l=await t.subscribe(r.id,{...e,modules:V()(e.modules,"id")});l.ok?(P("\u0645\u06cc\u0632 \u06a9\u0627\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u06af\u0631\u062f\u06cc\u062f."),n(),s(),g(o)):422===l.status&&I()(l.errors,((e,n)=>{j(n,{type:"manual",message:e[0]})})),y(!1)})),children:"\u062b\u0628\u062a"}),(0,L.jsx)(l.Z,{sx:{flexGrow:1}}),(0,L.jsx)(i.Z,{type:"button",onClick:n,children:"\u0627\u0646\u0635\u0631\u0627\u0641"})]}),(0,L.jsx)(A.Z,{open:F,onClose:U,selectable:!0,onClear:()=>{p("modules",""),U()},onSelect:e=>{p("modules",[...v,e]),U()},selected:v})]})},N=()=>{const{workspace:e}=(0,p.bx)(),{workspaceId:n}=(0,p.UO)(),r=(0,m.dp)("core.Workspaces"),[f,C]=(0,g.lr)(),{data:y,total:P,loading:w,loadMore:k,reload:S}=(0,b.Z)({handleFetch:e=>r.subscriptions(n,{...e,...Object.fromEntries([...f])}),loadDeps:[f],infiniteScrollDefaultParams:{page:f.has("page")?f.get("page"):0,perPage:f.has("perPage")?f.get("perPage"):25}}),M=(0,v.Z)(),[T,D]=(0,x.useState)({open:!1});return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsxs)(l.Z,{sx:{display:"flex",mb:{xs:0,sm:1},px:3,py:2},children:[(0,L.jsx)(l.Z,{sx:{flexGrow:1}}),(0,L.jsx)(a.Z,{direction:"row",spacing:1,children:(0,L.jsx)(i.Z,{variant:"contained",startIcon:(0,L.jsx)(s.JO,{icon:"solar:add-circle-bold"}),onClick:()=>D({open:!0}),children:"\u0627\u0634\u062a\u0631\u0627\u06a9 \u062c\u062f\u06cc\u062f"})})]}),(0,L.jsx)(j.Z,{data:y,loading:w,meta:{total:P},infiniteScrollProps:{loading:!1,hasNextPage:y.length<P,onLoadMore:k},definitions:[{title:"\u0631\u062f\u06cc\u0641",headerCellProps:{align:"center"},rowCellProps:{align:"center"},renderCell:(e,n)=>M(n)},{renderCell:e=>(0,L.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,L.jsx)(o.Z,{variant:"rounded",alt:e.subscribed.identifier,src:e.subscribed.picture,sx:{mr:1},children:(0,L.jsx)(t.Z,{})}),(0,L.jsx)(l.Z,{children:(0,L.jsx)("strong",{children:e.subscribed.name})})]})},{title:"\u062a\u0627\u0631\u06cc\u062e \u0634\u0631\u0648\u0639",headerCellProps:{align:"center"},rowCellProps:{align:"center"},render:(e,n)=>e.validFrom?(0,L.jsx)(Z.Z,{children:(0,u.Z)(new Date(e.validFrom),"yyyy/MM/dd hh:mm")}):"-"},{title:"\u062a\u0627\u0631\u06cc\u062e \u0627\u0639\u062a\u0628\u0627\u0631",headerCellProps:{align:"center"},rowCellProps:{align:"center"},render:(e,n)=>e.validTill?(0,L.jsx)(Z.Z,{children:(0,u.Z)(new Date(e.validTill),"yyyy/MM/dd hh:mm")}):"\u221e"},{title:"\u0632\u0645\u0627\u0646 \u0628\u0627\u0642\u06cc\u0645\u0627\u0646\u062f\u0647",headerCellProps:{align:"center"},rowCellProps:{align:"center"},render:(e,n)=>e.validTill?(0,L.jsxs)("span",{children:[(0,L.jsx)(Z.Z,{children:(0,h.Z)(new Date(e.validTill),new Date)})," ",(0,L.jsx)("small",{children:"\u0631\u0648\u0632"})]}):"\u221e"}],renderSheetTitle:e=>{var n;return null===(n=e.subscribed)||void 0===n?void 0:n.name},renderListItemChildren:(e,n)=>(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(d.Z,{children:(0,L.jsx)(o.Z,{variant:"rounded",alt:e.subscribed.identifier,src:e.subscribed.picture,children:(0,L.jsx)(t.Z,{})})}),(0,L.jsx)(c.Z,{primary:(0,L.jsx)("strong",{children:e.subscribed.name})})]}),listItemProps:{disablePadding:!1},paginationProps:{count:P,rowsPerPage:f.get("perPage")||25,page:f.get("page")||0,onPageChange:(e,n)=>C({...Object.fromEntries([...f]),page:n}),onRowsPerPageChange:e=>C({...Object.fromEntries([...f]),perPage:e.target.value})}}),(0,L.jsx)(U,{workspace:e,...T,onClose:()=>D({open:!1}),onSave:()=>{S(),D({open:!1})}})]})}},69964:(e,n,r)=>{var s=r(64836);n.Z=void 0;var t=s(r(45649)),l=r(80184),a=(0,t.default)((0,l.jsx)("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}),"Extension");n.Z=a},18702:(e,n,r)=>{var s=r(64836);n.Z=void 0;var t=s(r(45649)),l=r(80184),a=(0,t.default)((0,l.jsx)("path",{d:"m16.66 4.52 2.83 2.83-2.83 2.83-2.83-2.83 2.83-2.83M9 5v4H5V5h4m10 10v4h-4v-4h4M9 15v4H5v-4h4m7.66-13.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65zM11 3H3v8h8V3zm10 10h-8v8h8v-8zm-10 0H3v8h8v-8z"}),"WidgetsOutlined");n.Z=a},11838:(e,n,r)=>{r.d(n,{Z:()=>d});var s=r(517);function t(e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),e.getTime()-n.getTime()}var l=r(4522);function a(e){(0,l.Z)(1,arguments);var n=(0,s.Z)(e);return n.setHours(0,0,0,0),n}var i=864e5;function o(e,n){var r=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return r<0?-1:r>0?1:r}function d(e,n){(0,l.Z)(2,arguments);var r=(0,s.Z)(e),d=(0,s.Z)(n),c=o(r,d),u=Math.abs(function(e,n){(0,l.Z)(2,arguments);var r=a(e),s=a(n),o=r.getTime()-t(r),d=s.getTime()-t(s);return Math.round((o-d)/i)}(r,d));r.setDate(r.getDate()-c*u);var h=c*(u-Number(o(r,d)===-c));return 0===h?0:h}}}]);
//# sourceMappingURL=4172.199e8cdd.chunk.js.map