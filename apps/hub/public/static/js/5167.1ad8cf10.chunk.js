"use strict";(globalThis.webpackChunkfarahub=globalThis.webpackChunkfarahub||[]).push([[5167],{24010:(e,o,i)=>{i.d(o,{A:()=>j});var t=i(98587),r=i(58168),n=i(65043),s=i(58387),a=i(65049),l=i(75429),d=i(9848),c=i(98206),h=i(14987),p=i(60239);function u(e){return(0,p.Ay)("MuiFab",e)}const g=(0,h.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var m=i(34535),x=i(61475),b=i(70579);const A=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],v=(0,m.Ay)(l.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,x.A)(e)||"classes"===e,overridesResolver:(e,o)=>{const{ownerState:i}=e;return[o.root,o[i.variant],o[`size${(0,d.A)(i.size)}`],"inherit"===i.color&&o.colorInherit,o[(0,d.A)(i.size)],o[i.color]]}})((({theme:e,ownerState:o})=>{var i,t;return(0,r.A)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(i=(t=e.palette).getContrastText)?void 0:i.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${g.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===o.size&&{width:40,height:40},"medium"===o.size&&{width:48,height:48},"extended"===o.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===o.variant&&"small"===o.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===o.variant&&"medium"===o.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===o.color&&{color:"inherit"})}),(({theme:e,ownerState:o})=>(0,r.A)({},"inherit"!==o.color&&"default"!==o.color&&null!=(e.vars||e).palette[o.color]&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}}})),(({theme:e})=>({[`&.${g.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),j=n.forwardRef((function(e,o){const i=(0,c.b)({props:e,name:"MuiFab"}),{children:n,className:l,color:h="default",component:p="button",disabled:g=!1,disableFocusRipple:m=!1,focusVisibleClassName:x,size:j="large",variant:C="circular"}=i,y=(0,t.A)(i,A),w=(0,r.A)({},i,{color:h,component:p,disabled:g,disableFocusRipple:m,size:j,variant:C}),f=(e=>{const{color:o,variant:i,classes:t,size:n}=e,s={root:["root",i,`size${(0,d.A)(n)}`,"inherit"===o?"colorInherit":o]},l=(0,a.A)(s,u,t);return(0,r.A)({},t,l)})(w);return(0,b.jsx)(v,(0,r.A)({className:(0,s.A)(f.root,l),component:p,disabled:g,focusRipple:!m,focusVisibleClassName:(0,s.A)(f.focusVisible,x),ownerState:w,ref:o},y,{classes:f,children:n}))}))},44413:(e,o,i)=>{var t=i(24994);o.A=void 0;var r=t(i(40039)),n=i(70579);o.A=(0,r.default)((0,n.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"MenuOutlined")},48478:(e,o,i)=>{i.d(o,{A:()=>r});var t=i(73216);const r=()=>{const e=(0,t.Zp)(),o=(0,t.zy)();return(i,t={})=>e(i,{state:t.replace?o.state:{prev:o},...t})}},75167:(e,o,i)=>{i.r(o),i.d(o,{default:()=>N});var t=i(22505),r=i(44413),n=i(81e3),s=i(88911),a=i(12110),l=i(20819),d=i.n(l),c=i(87424),h=i.n(c),p=i(35475),u=i(18012),g=i(30370),m=i(97324),x=i(56976),b=i(20694),A=i(74175),v=i(10697),j=i(17022),C=i(34535),y=i(85865),w=i(43845),f=i(38968),k=i(26353),P=i(65043),z=i(73216),R=i(66789),S=i(12766),F=i(32665),I=i(27800),L=i(18611),E=i(70579);const M=(0,C.Ay)(y.A)((({theme:e})=>({overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":"2"}))),O=({loading:e,data:o,meta:i,infiniteScrollProps:t,onClickEdit:r,onClickDelete:n})=>{const{application:s}=(0,u.YY)(),{inject:a}=(0,g.As)(),[l,c]=((0,z.Zp)(),(0,z.zy)(),(0,p.ok)()),[m,x]=(0,P.useState)(l.has("sort")?l.get("sort"):"-createdAt");(0,F.A)((()=>{c({...Object.fromEntries(l),sort:m})}),[m]);const b=(0,I.A)(),A=(0,L.A)(),C=(0,u.b7)("People.details");return(0,P.useEffect)((()=>{console.log("emitting..."),s.socket.emit("customersClub:test")}),[]),(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(R.A,{data:o,loading:e,infiniteScrollProps:t,definitions:h()([{title:"\u0631\u062f\u06cc\u0641",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:100},renderCell:(e,o)=>(0,E.jsx)(S.A,{children:b(o)}),priority:100},{field:"name",title:"\u0639\u0646\u0648\u0627\u0646",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:200},priority:200},{field:"content",title:"\u0645\u062a\u0646 \u067e\u06cc\u0627\u0645",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:200},render:e=>(0,E.jsx)(M,{whiteSpace:"pre",children:(0,E.jsx)(S.A,{children:e.content})})||"-",priority:200},{title:"\u062f\u0633\u062a\u0647\u200c\u0647\u0627\u06cc \u0647\u062f\u0641",rowCellProps:{width:300},renderCell:e=>(0,E.jsx)(S.A,{children:e.targets.map((e=>e.target.name)).join(", ")}),priority:300},{title:"\u0648\u0636\u0639\u06cc\u062a",rowCellProps:{width:50},renderCell:e=>(0,E.jsxs)("div",{children:[(0,E.jsx)(w.A,{label:"\u062f\u0631 \u062d\u0627\u0644 \u062a\u0627\u06cc\u06cc\u062f",color:"warning",size:"small"}),(0,E.jsx)(w.A,{label:"\u062f\u0631 \u062d\u0627\u0644 \u0627\u0631\u0633\u0627\u0644",color:"info",size:"small"}),(0,E.jsx)(w.A,{label:"\u0627\u0631\u0633\u0627\u0644 \u0634\u062f\u0647",color:"success",size:"small"})]}),priority:300},...d()(a("People","PeopleList.definitions")||[])],(e=>e.priority)),renderSheetTitle:e=>(0,E.jsx)(S.A,{children:e.name}),renderListItemChildren:e=>(0,E.jsx)(f.A,{onClick:()=>A(C(e)),children:(0,E.jsx)(k.A,{primary:(0,E.jsx)("strong",{children:e.name})})}),tableRowProps:e=>({hover:!0,striped:!0,onClick:()=>A(C(e))}),paginationProps:{count:i.total,rowsPerPage:l.get("perPage")||25,page:l.get("page")||0,onPageChange:(e,o)=>c({...Object.fromEntries([...l]),page:o}),onRowsPerPageChange:e=>c({...Object.fromEntries([...l]),perPage:e.target.value})},actions:[{title:"\u0648\u06cc\u0631\u0627\u06cc\u0634",icon:(0,E.jsx)(j.A,{}),onClick:r,authorize:({hasRole:e,hasPermission:o})=>e("owner")||o("person:edit")},{title:"\u062d\u0630\u0641",icon:(0,E.jsx)(v.A,{}),onClick:e=>n(e,!1),authorize:({hasRole:e,hasPermission:o})=>e("owner")||o("person:delete")}]})})};var D=i(48478);const N=()=>{const{inject:e}=(0,g.As)(),o=(0,u.Mv)("Customers-Club.Loyalties"),i=(0,D.A)(),[l]=(0,p.ok)(),{data:c,total:v,loading:j,loadMore:C,reload:y}=(0,A.A)({handleFetch:e=>o.list({...e,...Object.fromEntries([...l])}),loadDeps:[l],infiniteScrollDefaultParams:{page:l.has("page")?l.get("page"):0,perPage:l.has("perPage")?l.get("perPage"):25}});(0,P.useEffect)((()=>{!j&&v<1&&i("add")}),[c,v,j]);const w=Object.assign({},...e("Customers-Club","LoyaltiesList.Hooks")||[]),f=(0,u.b7)("Customers-Club.loyaltyPrograms");return(0,E.jsx)(b.JQ,{...f,children:(0,E.jsxs)(x.A,{children:[(0,E.jsxs)(n.A,{sx:{display:"flex",mb:{xs:0,sm:1}},children:[(0,E.jsx)(n.A,{sx:{flexGrow:1}}),(0,E.jsx)(s.A,{direction:"row",spacing:1,children:(0,E.jsx)(m.A,{actions:h()([{title:"\u0628\u0631\u0646\u0627\u0645\u0647 \u0648\u0641\u0627\u062f\u0627\u0631\u06cc \u062c\u062f\u06cc\u062f",icon:(0,E.jsx)(t.A,{}),onClick:()=>i("add"),authorize:({hasRole:e,hasPermission:o})=>e("owner")||o("person:edit"),priority:100},...d()(e("Customers-Club","LoyaltiesList.ActionsList",{data:c,loading:j,reload:y,...w})||[])],(e=>e.priority)),ResponsiveActionIcon:(0,E.jsx)(r.A,{}),responsiveActionProps:{color:"primary"}})})]}),(0,E.jsx)(a.A,{variant:"outlined",sx:{flexGrow:1},children:(0,E.jsx)(O,{data:c,loading:j,meta:{total:v},infiniteScrollProps:{loading:!1,hasNextPage:c.length<v,onLoadMore:C},onClickEdit:e=>{},onClickDelete:(e,o)=>{}})}),e("Customers-Club","LoyaltiesList.Footer",{data:c,loading:j,reload:y,...w})]})})}},97324:(e,o,i)=>{i.d(o,{A:()=>R});var t=i(34535),r=i(24010),n=i(81e3),s=i(26240),a=i(79285),l=i(24836),d=i(35316),c=i(68903),h=i(88911),p=i(8302),u=i(73216),g=i(30370),m=i(54049),x=i(30298),b=i(17392),A=i(85865),v=(i(65043),i(70579));const j=(0,t.Ay)(b.A)((({theme:e})=>({display:"flex",flexDirection:"column",minWidth:94.5}))),C=(0,t.Ay)("span")((({theme:e})=>({display:"inline-block"}))),y=(0,t.Ay)(A.A)((({theme:e})=>({...e.typography.button,display:"inline-block"}))),w=({label:e,labelTypographyProps:o={},children:i,...t})=>(0,v.jsxs)(j,{...t,children:[(0,v.jsx)(C,{children:i}),e&&(0,v.jsx)(y,{...o,children:e})]});var f=i(99275);const k=(0,t.Ay)(r.A)((({theme:e})=>({position:"fixed",bottom:`calc(${e.spacing(2)} + 48px)`,left:e.spacing(2),zIndex:100}))),P=(0,t.Ay)(n.A)((({theme:e})=>({}))),z=(0,t.Ay)("span")((({theme:e})=>({border:"1px solid currentColor",borderRadius:"50%",padding:e.spacing(.75),display:"flex",alignItems:"center",justifyContent:"center"}))),R=({actions:e=[],ResponsiveActionComponent:o=k,responsiveActionProps:i={},ResponsiveActionIcon:t,showResponsiveOnDesktop:r=!1})=>{var n,b;const A=(0,s.A)(),j=(0,a.A)(A.breakpoints.down("sm")),C=(0,u.Zp)(),y="actions",{hasSegment:R,addSegment:S,removeSegment:F}=(0,x.A)(),I=(0,m.A)(),L=({children:o})=>e.length>1?(0,v.jsx)(v.Fragment,{children:o}):(0,v.jsx)(l.A,{direction:"up",in:!I,mountOnEnter:!0,unmountOnExit:!0,children:o});return r||j?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(L,{children:(0,v.jsx)(o,{onClick:e.length>1?()=>C(S(y)):null===(n=e[0])||void 0===n?void 0:n.onClick,...i,children:e.length>1?t:null===(b=e[0])||void 0===b?void 0:b.icon})}),e.length>0&&(0,v.jsx)(f.A,{dialogProps:{fullWidth:!0,maxWidth:"xs"},open:R(y),onClose:()=>C(F(y),{replace:!0}),children:(0,v.jsx)(d.A,{children:(0,v.jsx)(c.Ay,{container:!0,columns:3,children:e.map(((e,o)=>(0,v.jsx)(g.UX,{authorize:e.authorize,children:(0,v.jsx)(c.Ay,{item:!0,xs:1,alignItems:"center",justifyContent:"center",children:(0,v.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,v.jsx)(w,{label:e.title,onClick:e.onClick,size:"large",color:"inherit",labelTypographyProps:{sx:{mt:1}},children:(0,v.jsx)(z,{children:e.icon})})})})},o)))})})})]}):(0,v.jsx)(P,{children:(0,v.jsx)(h.A,{direction:j?"row-reverse":"row",spacing:1,children:e.map(((e,o)=>(0,v.jsx)(g.UX,{authorize:e.authorize,children:(0,v.jsx)(p.A,{variant:"transparent",disableElevation:!0,startIcon:e.icon,onClick:e.onClick,...e.buttonProps,children:e.title})},o)))})})}}}]);
//# sourceMappingURL=5167.1ad8cf10.chunk.js.map