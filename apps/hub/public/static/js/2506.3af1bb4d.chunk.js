"use strict";(globalThis.webpackChunkfarahub=globalThis.webpackChunkfarahub||[]).push([[2506],{2506:(e,o,t)=>{t.r(o),t.d(o,{default:()=>he});var n=t(22505),s=t(44413),r=t(81e3),i=t(88911),a=t(12110),l=t(39336),d=t(20819),c=t.n(d),h=t(87424),p=t.n(h),u=t(46987),x=t(35475),g=t(18012),m=t(30370),A=t(97324),j=t(56976),v=t(20694),b=t(11107),f=t(74175),C=t(22070),y=t(65043),w=t(51833),k=t(70579);const P=({open:e,onClose:o,role:t,onDelete:n,requestConfig:s,...r})=>{const i=(0,g.Mv)("Roles.Main"),[a,l]=(0,y.useState)(!1);(0,y.useEffect)((()=>{e&&l(!1)}),[e]);return(0,k.jsx)(w.A,{open:e,onClose:o,...r,title:"\u0646\u0642\u0634 \u062d\u0630\u0641 \u06af\u0631\u062f\u062f\u061f",content:"\u0646\u0642\u0634 \u0628\u0631\u0627\u06cc \u0647\u0645\u06cc\u0634\u0647 \u062d\u0630\u0641 \u06af\u0631\u062f\u062f\u061f",onConfirm:async()=>{l(!0);try{const e=await i.delete(t.id,s);l(!1),e.ok&&n()}catch(e){console.log(e)}},confirmButtonProps:{color:"error"},cancelButtonProps:{autoFocus:!0},confirmText:"\u062d\u0630\u0641 \u0628\u0631\u0627\u06cc \u0647\u0645\u06cc\u0634\u0647",loading:a,confirmIcon:(0,k.jsx)(C.A,{})})};var R=t(26581),z=t(34109),S=t(71612),F=t(39251),I=t(5899),V=t(94329),O=t(74563),M=t(38968),W=t(26353),E=t(30279),L=t(35721),D=t(2050),N=t(85865),T=t(4219),H=t(17392),U=t(29347),q=t(99275),G=t(67444),$=t(85661),B=t(3111);const X=({module:e,value:o=[],onChange:t=()=>{}})=>{const[n,s]=(0,y.useState)(!1),r=e=>o.filter((o=>o.id===e.id)).length>0;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(M.A,{onClick:()=>s(!n),children:[(0,k.jsx)(W.A,{primary:(0,k.jsx)("strong",{children:e.name})}),n?(0,k.jsx)(F.A,{}):(0,k.jsx)(I.A,{})]}),(0,k.jsx)(E.A,{in:n,timeout:"auto",unmountOnExit:!0,children:(0,k.jsx)(L.A,{dense:!0,component:"div",disablePadding:!0,children:e.permissions.map(((e,n)=>(0,k.jsxs)(M.A,{sx:{pl:4},onClick:()=>{var n;t(r(n=e)?o.filter((e=>e.id!==n.id)):[...o,n])},children:[(0,k.jsx)(D.A,{children:r(e)?(0,k.jsx)(R.A,{}):(0,k.jsx)(z.A,{})}),(0,k.jsx)(W.A,{primary:e.name})]},n)))})})]})},Z=({value:e,onChange:o})=>{const t=(0,g.Mv)("Core.Workspace"),{data:n,loading:s,reload:r}=(0,$.A)({handler:()=>t.modules({whereHasPermissions:!0}),initialState:{data:{data:[],total:0},loading:!0}}),{data:i}=n;return s?(0,k.jsx)(N.A,{variant:"subtitle2",fontWeight:400,sx:{p:2,textAlign:"center"},children:"\u062f\u0631 \u062d\u0627\u0644 \u0628\u0627\u0631\u06af\u0630\u0627\u0631\u06cc..."}):(0,k.jsx)(L.A,{dense:!0,children:i.map(((t,n)=>(0,k.jsx)(X,{module:t,value:e,onChange:o},n)))})},J=({open:e,onClose:o,defaultValues:t={},onCreateOrUpdate:n})=>{const{inject:s}=(0,m.As)(),i=(0,g.Mv)("Roles.Main"),a={name:"",access:[],...Object.assign({},...s("Roles","RoleForm.initialValues")||[]),...t},{register:d,loading:c,handleSubmit:h,reset:p,getValue:u,setValue:x}=(0,B.A)({initialValues:a,handlePost:e=>i.createOrUpdate(e),onSubmit:n});(0,y.useEffect)((()=>{e&&p(a)}),[e]);const A=Object.assign({},...s("Roles","RoleForm.Hooks")||[]);return(0,k.jsxs)(q.A,{open:e,onClose:o,dialogProps:{fullWidth:!0,maxWidth:"xs"},children:[(0,k.jsxs)("form",{noValidate:!0,onSubmit:h,children:[(0,k.jsxs)(T.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,k.jsx)(r.A,{children:t.id?"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0645\u0634\u062e\u0635\u0627\u062a \u0646\u0642\u0634":"\u062b\u0628\u062a \u0645\u0634\u062e\u0635\u0627\u062a \u0646\u0642\u0634"}),(0,k.jsx)(H.A,{onClick:o,size:"small",children:(0,k.jsx)(S.A,{})})]}),(0,k.jsx)(l.A,{}),(0,k.jsxs)(r.A,{sx:{p:0},children:[(0,k.jsx)(r.A,{sx:{p:2},children:(0,k.jsx)(G.A,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",variant:"filled",label:"\u0646\u0627\u0645 \u0646\u0642\u0634",placeholder:"\u0645\u062f\u06cc\u0631 \u06a9\u0644\u060c \u0645\u062f\u06cc\u0631 \u0641\u0631\u0648\u0634\u060c \u0645\u0646\u0634\u06cc \u062f\u0641\u062a\u0631 \u06cc\u0627...",required:!0,...d("name")})}),(0,k.jsx)(l.A,{}),(0,k.jsx)(N.A,{fontWeight:"bold",sx:{m:2,mb:0},children:"\u0645\u062c\u0648\u0632\u0647\u0627\u06cc \u0646\u0642\u0634"}),(0,k.jsx)(Z,{value:u("access").map((e=>e.permission)),onChange:e=>x("access",e.map((e=>({permission:e}))))}),s("Roles","RoleForm.PostForm",{register:d,loading:c,getValue:u,setValue:x,reset:p,...A})]}),(0,k.jsx)(l.A,{}),(0,k.jsxs)(U.A,{children:[(0,k.jsx)(O.A,{loading:c,loadingPosition:"start",type:"submit",variant:"contained",startIcon:(0,k.jsx)(V.A,{}),children:"\u062b\u0628\u062a \u0645\u0634\u062e\u0635\u0627\u062a"}),(0,k.jsx)(r.A,{sx:{flexGrow:1}})]})]}),s("Roles","RoleForm.Footer",{register:d,loading:c,getValue:u,setValue:x,reset:p,...A})]})};var Q=t(10697),K=t(17022),Y=t(73216),_=t(66789),ee=t(12766),oe=t(32665),te=t(27800);const ne=({loading:e,roles:o,meta:t,infiniteScrollProps:n,onClickEdit:s,onClickDelete:r})=>{const i=(0,Y.Zp)(),a=(0,Y.zy)(),[l,d]=(0,x.ok)(),[c,h]=(0,y.useState)(l.has("sort")?l.get("sort"):"-createdAt");(0,oe.A)((()=>{d({...Object.fromEntries(l),sort:c})}),[c]);const p=(0,te.A)();return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(_.A,{data:o,loading:e,infiniteScrollProps:n,definitions:[{title:"\u0631\u062f\u06cc\u0641",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:100},renderCell:(e,o)=>(0,k.jsx)(ee.A,{children:p(o)})},{field:"code",title:"\u0646\u0642\u0634",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:100},render:e=>(0,k.jsx)(ee.A,{children:e.name})||"-"},{title:"\u0645\u062c\u0648\u0632\u200c\u0647\u0627",rowCellProps:{width:400},render:e=>(0,k.jsx)(ee.A,{children:e.access.map((e=>e.permission.name)).join(", ")})}],renderSheetTitle:e=>(0,k.jsx)(ee.A,{children:e.subject}),renderListItemChildren:e=>(0,k.jsx)(M.A,{onClick:()=>i("/roles/".concat(e.id),{state:{prev:a}}),children:(0,k.jsx)(W.A,{primary:(0,k.jsx)("strong",{children:e.fullName})})}),tableRowProps:e=>({hover:!0,striped:!0,onClick:()=>i("/roles/".concat(e.id),{state:{prev:a}})}),paginationProps:{count:t.total,rowsPerPage:l.get("perPage")||25,page:l.get("page")||0,onPageChange:(e,o)=>d({...Object.fromEntries([...l]),page:o}),onRowsPerPageChange:e=>d({...Object.fromEntries([...l]),perPage:e.target.value})},actions:[{title:"\u0648\u06cc\u0631\u0627\u06cc\u0634",icon:(0,k.jsx)(K.A,{}),onClick:s},{title:"\u062d\u0630\u0641",icon:(0,k.jsx)(Q.A,{}),onClick:e=>r(e,!1)}]})})};var se=t(66360),re=t(34535),ie=t(62559),ae=t(37978);const le=(0,re.Ay)(se.A)((({theme:e})=>({color:e.palette.text.secondary}))),de=(0,re.Ay)(ie.Ay)((({theme:e})=>({fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.button.fontSize}))),ce=()=>{const[e,o]=(0,x.ok)(),[t,n]=(0,y.useState)(e.get("query")||""),s=(0,ae.A)(t,500);return(0,oe.A)((()=>{o({query:s})}),[s]),(0,k.jsx)(r.A,{sx:{px:2,py:1.5,display:"flex"},children:(0,k.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},children:[(0,k.jsx)(le,{sx:{mr:1},color:"inherit"}),(0,k.jsx)(de,{value:t,placeholder:"\u062c\u0633\u062a\u062c\u0648 \u0646\u0627\u0645 \u0646\u0642\u0634...",onChange:e=>n(e.target.value),sx:{flexGrow:1}})]})})},he=()=>{const{inject:e}=(0,m.As)(),o=(0,g.Mv)("Roles.main"),[t]=(0,x.ok)(),{data:d,total:h,loading:C,loadMore:y,reload:w}=(0,f.A)({handleFetch:e=>o.list({...e,...Object.fromEntries([...t])}),loadDeps:[t],infiniteScrollDefaultParams:{page:t.has("page")?t.get("page"):0,perPage:t.has("perPage")?t.get("perPage"):25}}),{enqueueSnackbar:R}=(0,u.dh)(),[z,S,F]=(0,b.A)("form"),I=e=>{R(e),w(),F()},[V,O,M]=(0,b.A)("delete",{hashDeps:["role"]}),W=Object.assign({},...e("Roles","RolesList.Hooks")||[]),E=(0,g.b7)("Roles.manage");return(0,k.jsx)(v.JQ,{...E,children:(0,k.jsxs)(j.A,{children:[(0,k.jsxs)(r.A,{sx:{display:"flex",mb:{xs:0,sm:1}},children:[(0,k.jsx)(r.A,{sx:{flexGrow:1}}),(0,k.jsx)(i.A,{direction:"row",spacing:1,children:(0,k.jsx)(A.A,{actions:p()([{title:"\u0646\u0642\u0634 \u062c\u062f\u06cc\u062f",icon:(0,k.jsx)(n.A,{}),onClick:()=>{S({onCreateOrUpdate:()=>I("\u0646\u0642\u0634 \u062b\u0628\u062a \u06af\u0631\u062f\u06cc\u062f.")})},priority:100},...c()(e("Roles","RolesList.ActionsList",{data:d,loading:C,reload:w,...W})||[])],(e=>e.priority)),ResponsiveActionIcon:(0,k.jsx)(s.A,{}),responsiveActionProps:{color:"primary"}})})]}),(0,k.jsxs)(a.A,{variant:"outlined",sx:{flexGrow:1},children:[(0,k.jsx)(ce,{}),(0,k.jsx)(l.A,{}),(0,k.jsx)(ne,{roles:d,loading:C,meta:{total:h},infiniteScrollProps:{loading:!1,hasNextPage:d.length<h,onLoadMore:y},onClickEdit:e=>{S({defaultValues:e,onCreateOrUpdate:()=>I("\u0646\u0642\u0634 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u06af\u0631\u062f\u06cc\u062f.")})},onClickDelete:e=>{O({role:e})}})]}),(0,k.jsx)(J,{...z}),(0,k.jsx)(P,{...V,onDelete:()=>{R("\u0646\u0642\u0634 \u062d\u0630\u0641 \u06af\u0631\u062f\u06cc\u062f"),M(),w()}}),e("Roles","RolesList.Footer",{data:d,loading:C,reload:w,...W})]})})}},24010:(e,o,t)=>{t.d(o,{A:()=>b});var n=t(98587),s=t(58168),r=t(65043),i=t(58387),a=t(65049),l=t(75429),d=t(9848),c=t(98206),h=t(14987),p=t(60239);function u(e){return(0,p.Ay)("MuiFab",e)}const x=(0,h.A)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var g=t(34535),m=t(61475),A=t(70579);const j=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],v=(0,g.Ay)(l.A,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,m.A)(e)||"classes"===e,overridesResolver:(e,o)=>{const{ownerState:t}=e;return[o.root,o[t.variant],o[`size${(0,d.A)(t.size)}`],"inherit"===t.color&&o.colorInherit,o[(0,d.A)(t.size)],o[t.color]]}})((({theme:e,ownerState:o})=>{var t,n;return(0,s.A)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(t=(n=e.palette).getContrastText)?void 0:t.call(n,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${x.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===o.size&&{width:40,height:40},"medium"===o.size&&{width:48,height:48},"extended"===o.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===o.variant&&"small"===o.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===o.variant&&"medium"===o.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===o.color&&{color:"inherit"})}),(({theme:e,ownerState:o})=>(0,s.A)({},"inherit"!==o.color&&"default"!==o.color&&null!=(e.vars||e).palette[o.color]&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}}})),(({theme:e})=>({[`&.${x.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),b=r.forwardRef((function(e,o){const t=(0,c.b)({props:e,name:"MuiFab"}),{children:r,className:l,color:h="default",component:p="button",disabled:x=!1,disableFocusRipple:g=!1,focusVisibleClassName:m,size:b="large",variant:f="circular"}=t,C=(0,n.A)(t,j),y=(0,s.A)({},t,{color:h,component:p,disabled:x,disableFocusRipple:g,size:b,variant:f}),w=(e=>{const{color:o,variant:t,classes:n,size:r}=e,i={root:["root",t,`size${(0,d.A)(r)}`,"inherit"===o?"colorInherit":o]},l=(0,a.A)(i,u,n);return(0,s.A)({},n,l)})(y);return(0,A.jsx)(v,(0,s.A)({className:(0,i.A)(w.root,l),component:p,disabled:x,focusRipple:!g,focusVisibleClassName:(0,i.A)(w.focusVisible,m),ownerState:y,ref:o},C,{classes:w,children:r}))}))},39251:(e,o,t)=>{var n=t(24994);o.A=void 0;var s=n(t(40039)),r=t(70579);o.A=(0,s.default)((0,r.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLessOutlined")},44413:(e,o,t)=>{var n=t(24994);o.A=void 0;var s=n(t(40039)),r=t(70579);o.A=(0,s.default)((0,r.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"MenuOutlined")},97324:(e,o,t)=>{t.d(o,{A:()=>z});var n=t(34535),s=t(24010),r=t(81e3),i=t(26240),a=t(79285),l=t(24836),d=t(35316),c=t(68903),h=t(88911),p=t(8302),u=t(73216),x=t(30370),g=t(54049),m=t(30298),A=t(17392),j=t(85865),v=(t(65043),t(70579));const b=(0,n.Ay)(A.A)((({theme:e})=>({display:"flex",flexDirection:"column",minWidth:94.5}))),f=(0,n.Ay)("span")((({theme:e})=>({display:"inline-block"}))),C=(0,n.Ay)(j.A)((({theme:e})=>({...e.typography.button,display:"inline-block"}))),y=({label:e,labelTypographyProps:o={},children:t,...n})=>(0,v.jsxs)(b,{...n,children:[(0,v.jsx)(f,{children:t}),e&&(0,v.jsx)(C,{...o,children:e})]});var w=t(99275);const k=(0,n.Ay)(s.A)((({theme:e})=>({position:"fixed",bottom:`calc(${e.spacing(2)} + 48px)`,left:e.spacing(2),zIndex:100}))),P=(0,n.Ay)(r.A)((({theme:e})=>({}))),R=(0,n.Ay)("span")((({theme:e})=>({border:"1px solid currentColor",borderRadius:"50%",padding:e.spacing(.75),display:"flex",alignItems:"center",justifyContent:"center"}))),z=({actions:e=[],ResponsiveActionComponent:o=k,responsiveActionProps:t={},ResponsiveActionIcon:n,showResponsiveOnDesktop:s=!1})=>{var r,A;const j=(0,i.A)(),b=(0,a.A)(j.breakpoints.down("sm")),f=(0,u.Zp)(),C="actions",{hasSegment:z,addSegment:S,removeSegment:F}=(0,m.A)(),I=(0,g.A)(),V=({children:o})=>e.length>1?(0,v.jsx)(v.Fragment,{children:o}):(0,v.jsx)(l.A,{direction:"up",in:!I,mountOnEnter:!0,unmountOnExit:!0,children:o});return s||b?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V,{children:(0,v.jsx)(o,{onClick:e.length>1?()=>f(S(C)):null===(r=e[0])||void 0===r?void 0:r.onClick,...t,children:e.length>1?n:null===(A=e[0])||void 0===A?void 0:A.icon})}),e.length>0&&(0,v.jsx)(w.A,{dialogProps:{fullWidth:!0,maxWidth:"xs"},open:z(C),onClose:()=>f(F(C),{replace:!0}),children:(0,v.jsx)(d.A,{children:(0,v.jsx)(c.Ay,{container:!0,columns:3,children:e.map(((e,o)=>(0,v.jsx)(x.UX,{authorize:e.authorize,children:(0,v.jsx)(c.Ay,{item:!0,xs:1,alignItems:"center",justifyContent:"center",children:(0,v.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,v.jsx)(y,{label:e.title,onClick:e.onClick,size:"large",color:"inherit",labelTypographyProps:{sx:{mt:1}},children:(0,v.jsx)(R,{children:e.icon})})})})},o)))})})})]}):(0,v.jsx)(P,{children:(0,v.jsx)(h.A,{direction:b?"row-reverse":"row",spacing:1,children:e.map(((e,o)=>(0,v.jsx)(x.UX,{authorize:e.authorize,children:(0,v.jsx)(p.A,{variant:"transparent",disableElevation:!0,startIcon:e.icon,onClick:e.onClick,...e.buttonProps,children:e.title})},o)))})})}}}]);
//# sourceMappingURL=2506.3af1bb4d.chunk.js.map