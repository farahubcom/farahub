{"version":3,"file":"static/js/7237.0a3fd2fa.chunk.js","mappings":"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","sources":["modules/customers-club/pages/SubmitVisit/SubmitVisit.js"],"sourcesContent":["import { Icon as Iconify } from \"@iconify/react\";\r\nimport { Box, Button, Card, Collapse, Grid, InputAdornment, Stack, TextField, Typography, styled } from \"@mui/material\";\r\nimport { useSnackbar } from \"notistack\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\nimport { useMiddleware, useTask } from \"../../../../Application\";\r\nimport ResponsiveContainer from \"../../../../components/ResponsiveContainer\";\r\nimport { TabView } from \"../../../../tabs\";\r\nimport useForm from \"../../../../utils/useForm\";\r\n\r\n\r\nconst PhoneField = styled(TextField)(({ theme }) => ({\r\n    '& input': {\r\n        letterSpacing: 3\r\n    }\r\n}));\r\n\r\n\r\nconst VisitButton = ({ phone, children }) => {\r\n    const { t } = useTranslation(\"customers-club\");\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const middleware = useMiddleware('Customers-Club.Visit');\r\n    const {\r\n        setValue,\r\n        loading,\r\n        handleSubmit\r\n    } = useForm({\r\n        initialValues: { phone },\r\n        handlePost: data => middleware.store(data),\r\n        onSubmit: (response) => {\r\n            enqueueSnackbar(t(\"New visit stored\"));\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        setValue(\"phone\", phone);\r\n    }, [phone])\r\n\r\n    return (\r\n        <Button\r\n            variant=\"contained\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n        >{children}</Button>\r\n    )\r\n}\r\n\r\nconst SubmitVisit = () => {\r\n\r\n    const { t } = useTranslation(\"customers-club\");\r\n\r\n    const task = useTask('Customers-Club.submitVisit');\r\n\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const middleware = useMiddleware('Customers-Club.Visit');\r\n\r\n    const [personCheckResult, setPersonCheckResult] = useState(null);\r\n\r\n    const initialValues = {\r\n        phone: '',\r\n    }\r\n\r\n    const {\r\n        register,\r\n        getValue,\r\n        loading,\r\n        handleSubmit\r\n    } = useForm({\r\n        initialValues,\r\n        handlePost: data => middleware.check(data),\r\n        onSubmit: (response) => {\r\n            setPersonCheckResult(response.person);\r\n        },\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (Boolean(getValue(\"phone\")) && getValue(\"phone\").length === 11) {\r\n            handleSubmit();\r\n        }\r\n    }, [getValue(\"phone\")])\r\n\r\n    return (\r\n        <TabView {...task}>\r\n            <ResponsiveContainer>\r\n                <Card variant=\"outlined\">\r\n                    <Grid container justifyContent=\"center\">\r\n                        <Grid item xs={12} md={4}>\r\n                            <Box sx={{ py: 15 }}>\r\n                                <PhoneField\r\n                                    fullWidth\r\n                                    label={t(\"pages.visit.form_label\", \"Submit a visit, message or event\")}\r\n                                    placeholder=\"09XXXXXXXXX\"\r\n                                    InputLabelProps={{ shrink: true }}\r\n                                    InputProps={{\r\n                                        startAdornment: (\r\n                                            <InputAdornment position=\"start\">\r\n                                                <Iconify icon='solar:magnifer-zoom-in-linear' />\r\n                                            </InputAdornment>\r\n                                        )\r\n                                    }}\r\n                                    inputProps={{\r\n                                        dir: 'ltr',\r\n                                    }}\r\n                                    disabled={loading}\r\n                                    {...register(\"phone\")}\r\n                                />\r\n                                <Collapse\r\n                                    in={getValue(\"phone\").length === 11 && !loading}\r\n                                >\r\n                                    <Box sx={{ mt: 3 }}>\r\n                                        {Boolean(personCheckResult) && (\r\n                                            <Stack direction=\"column\" spacing={1}>\r\n                                                <Typography>{t(\"pages.visit.fullName\")} : <strong>{personCheckResult?.fullName ?? '-'}</strong></Typography>\r\n                                                <Typography>{t(\"pages.visit.phone\")} : <strong>{personCheckResult?.phone ?? '-'}</strong></Typography>\r\n                                                <Typography>{t(\"pages.visit.email\")} : <strong>{personCheckResult?.email ?? '-'}</strong></Typography>\r\n                                                <Typography>{t(\"pages.visit.visitCount\")} : <strong>{personCheckResult?.customerClubVisitsCount}</strong></Typography>\r\n                                            </Stack>\r\n                                        )}\r\n                                        <Stack direction=\"row\" flexWrap=\"wrap\" gap={1} sx={{ mt: 3 }}>\r\n                                            {Boolean(personCheckResult) && (\r\n                                                <VisitButton phone={getValue(\"phone\")}>\r\n                                                    {t(\"pages.visit.submitVisit\")}\r\n                                                </VisitButton>\r\n                                            )}\r\n                                            {!Boolean(personCheckResult) && (\r\n                                                <>\r\n                                                    <VisitButton phone={getValue(\"phone\")}>\r\n                                                        {t(\"pages.visit.quickVisit\")}\r\n                                                    </VisitButton>\r\n                                                    <Button variant=\"outlined\"\r\n                                                    >ثبت مراجعه با مشخصات</Button>\r\n                                                </>\r\n                                            )}\r\n                                            <Button\r\n                                                startIcon={<Iconify icon='solar:bell-bing-linear' />}\r\n                                                variant=\"outlined\"\r\n                                            >اطلاع رسانی</Button>\r\n                                            <Button\r\n                                                variant=\"outlined\"\r\n                                            >یادآوری</Button>\r\n                                        </Stack>\r\n                                    </Box>\r\n                                </Collapse>\r\n                            </Box>\r\n                        </Grid>\r\n                    </Grid>\r\n                </Card>\r\n            </ResponsiveContainer>\r\n        </TabView>\r\n    )\r\n}\r\n\r\n\r\nexport default SubmitVisit;"],"names":["PhoneField","styled","TextField","theme","letterSpacing","VisitButton","phone","children","t","useTranslation","enqueueSnackbar","useSnackbar","middleware","useMiddleware","setValue","loading","handleSubmit","useForm","initialValues","handlePost","data","store","onSubmit","response","useEffect","_jsx","Button","variant","onClick","disabled","SubmitVisit","_personCheckResult$fu","_personCheckResult$ph","_personCheckResult$em","task","useTask","personCheckResult","setPersonCheckResult","useState","register","getValue","check","person","Boolean","length","TabView","ResponsiveContainer","Card","Grid","container","justifyContent","item","xs","md","_jsxs","Box","sx","py","fullWidth","label","placeholder","InputLabelProps","shrink","InputProps","startAdornment","InputAdornment","position","Iconify","icon","inputProps","dir","Collapse","in","mt","Stack","direction","spacing","Typography","fullName","email","customerClubVisitsCount","flexWrap","gap","_Fragment","startIcon"],"sourceRoot":""}