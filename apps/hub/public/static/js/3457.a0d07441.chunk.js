(globalThis.webpackChunkfarahub=globalThis.webpackChunkfarahub||[]).push([[3457],{11692:(e,t,o)=>{"use strict";o.d(t,{Z:()=>z});var r=o(66934),i=o(49877),n=o(68870),a=o(13967),s=o(95193),l=o(55931),c=o(39157),d=o(61889),h=o(36314),p=o(36151),u=o(57689),g=o(46019),m=o(28367),x=o(26386),v=o(13400),b=o(20890),Z=(o(72791),o(80184));const f=(0,r.ZP)(v.Z)((({theme:e})=>({display:"flex",flexDirection:"column",minWidth:94.5}))),j=(0,r.ZP)("span")((({theme:e})=>({display:"inline-block"}))),P=(0,r.ZP)(b.Z)((({theme:e})=>({...e.typography.button,display:"inline-block"}))),C=({label:e,labelTypographyProps:t={},children:o,...r})=>(0,Z.jsxs)(f,{...r,children:[(0,Z.jsx)(j,{children:o}),e&&(0,Z.jsx)(P,{...t,children:e})]});var y=o(26411);const w=(0,r.ZP)(i.Z)((({theme:e})=>({position:"fixed",bottom:`calc(${e.spacing(2)} + 48px)`,left:e.spacing(2),zIndex:100}))),I=(0,r.ZP)(n.Z)((({theme:e})=>({}))),k=(0,r.ZP)("span")((({theme:e})=>({border:"1px solid currentColor",borderRadius:"50%",padding:e.spacing(.75),display:"flex",alignItems:"center",justifyContent:"center"}))),z=({actions:e=[],ResponsiveActionComponent:t=w,responsiveActionProps:o={},ResponsiveActionIcon:r,showResponsiveOnDesktop:i=!1})=>{var n,v;const b=(0,a.Z)(),f=(0,s.Z)(b.breakpoints.down("sm")),j=(0,u.s0)(),P="actions",{hasSegment:z,addSegment:S,removeSegment:R}=(0,x.Z)(),F=(0,m.Z)(),T=({children:t})=>e.length>1?(0,Z.jsx)(Z.Fragment,{children:t}):(0,Z.jsx)(l.Z,{direction:"up",in:!F,mountOnEnter:!0,unmountOnExit:!0,children:t});return i||f?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(T,{children:(0,Z.jsx)(t,{onClick:e.length>1?()=>j(S(P)):null===(n=e[0])||void 0===n?void 0:n.onClick,...o,children:e.length>1?r:null===(v=e[0])||void 0===v?void 0:v.icon})}),e.length>0&&(0,Z.jsx)(y.Z,{dialogProps:{fullWidth:!0,maxWidth:"xs"},open:z(P),onClose:()=>j(R(P),{replace:!0}),children:(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(d.ZP,{container:!0,columns:3,children:e.map(((e,t)=>(0,Z.jsx)(g.FY,{authorize:e.authorize,children:(0,Z.jsx)(d.ZP,{item:!0,xs:1,alignItems:"center",justifyContent:"center",children:(0,Z.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Z.jsx)(C,{label:e.title,onClick:e.onClick,size:"large",color:"inherit",labelTypographyProps:{sx:{mt:1}},children:(0,Z.jsx)(k,{children:e.icon})})})})},t)))})})})]}):(0,Z.jsx)(I,{children:(0,Z.jsx)(h.Z,{direction:f?"row-reverse":"row",spacing:1,children:e.map(((e,t)=>(0,Z.jsx)(g.FY,{authorize:e.authorize,children:(0,Z.jsx)(p.Z,{variant:"transparent",disableElevation:!0,startIcon:e.icon,onClick:e.onClick,...e.buttonProps,children:e.title})},t)))})})}},13268:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var r=o(31357),i=o.n(r);class n{}n.getItemPureTotal=e=>e.amount*e.unitPrice,n.getItemDiscountPrice=e=>e.discount||0,n.getItemTotalPrice=e=>n.getItemPureTotal(e)-n.getItemDiscountPrice(e),n.getFactorPrice=(e,t)=>("PRICE"===t.unit?t.amount:t.amount/100*n.getInvoiceSubtotal(e))*("REDUCER"===t.type?-1:1),n.getInvoiceSubtotal=e=>i()(e,(e=>n.getItemTotalPrice(e))),n.getInvoiceTotal=(e,t)=>Number(n.getInvoiceSubtotal(e))+i()(t,(t=>n.getFactorPrice(e,t)));const a=n},83457:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>$});var r=o(4390),i=o(68870),n=o(36314),a=o(57621),s=o(94721),l=o(25506),c=o.n(l),d=o(64286),h=o.n(d),p=o(11087),u=o(64742),g=o(46019),m=o(11692),x=o(61709),v=o(7175),b=o(99519),Z=o(90503),f=o(88471),j=o(20890),P=o(76278),C=o(49900),y=o(72791),w=o(39230),I=o(78925),k=o(75669),z=o(25863),S=o(90577),R=o(26182),F=o(27067),T=o(13268),E=o(80184);const N=({loading:e,data:t,meta:o,infiniteScrollProps:r,onClickEdit:n,onClickDelete:a})=>{const{inject:s}=(0,g.aC)(),{t:l}=(0,w.$G)(["global","invoices"]),[d,m]=(0,p.lr)(),[x,v]=(0,y.useState)(d.has("sort")?d.get("sort"):"-createdAt");(0,S.Z)((()=>{m({...Object.fromEntries(d),sort:x})}),[x]);const b=(0,R.Z)(),N=(0,F.Z)(),M=(0,u.Vg)("Invoices.details");return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(I.Z,{data:t,loading:e,infiniteScrollProps:r,definitions:h()([{title:"\u0631\u062f\u06cc\u0641",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:100},renderCell:(e,t)=>(0,E.jsx)(k.Z,{children:b(t)}),priority:100},{field:"number",title:"\u0634\u0645\u0627\u0631\u0647",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:100},render:e=>(0,E.jsx)(k.Z,{children:e.number})||"-",priority:200},{title:"\u0645\u0634\u062a\u0631\u06cc",rowCellProps:{width:400},renderCell:e=>{var t;return(0,E.jsx)(i.Z,{sx:{display:"flex",alignItems:"center"},children:(0,E.jsx)("strong",{children:(0,E.jsx)(k.Z,{children:null===(t=e.customer)||void 0===t?void 0:t.fullName})})})},priority:300},{title:(0,E.jsxs)(E.Fragment,{children:[l("\u062e\u0627\u0644\u0635 \u0641\u0627\u06a9\u062a\u0648\u0631")," ",(0,E.jsx)(j.Z,{variant:"caption",children:"(\u0631\u06cc\u0627\u0644)"})]}),rowCellProps:{width:400},renderCell:e=>{const t=T.Z.getInvoiceTotal(e.items,e.factors);return isFinite(t)?(0,z.Z)(t):0},priority:300},...c()(s("Invoices","InvoicesList.definitions")||[])],(e=>e.priority)),renderSheetTitle:e=>(0,E.jsx)(k.Z,{children:e.name}),renderListItemChildren:e=>(0,E.jsx)(P.Z,{onClick:()=>N(M(e)),children:(0,E.jsx)(C.Z,{primary:(0,E.jsx)("strong",{children:e.name})})}),tableRowProps:e=>({hover:!0,striped:!0,onClick:()=>N(M(e))}),paginationProps:{count:o.total,rowsPerPage:d.has("perPage")?Number(d.get("perPage")):25,page:d.has("page")?Number(d.get("page")):0,onPageChange:(e,t)=>m({...Object.fromEntries([...d]),page:t}),onRowsPerPageChange:e=>m({...Object.fromEntries([...d]),perPage:e.target.value})},actions:[{title:"\u0648\u06cc\u0631\u0627\u06cc\u0634",icon:(0,E.jsx)(f.Z,{}),onClick:n,authorize:({hasRole:e,hasPermission:t})=>e("owner")||t("invoice:edit")},{title:"\u062d\u0630\u0641",icon:(0,E.jsx)(Z.Z,{}),onClick:e=>a(e,!1),authorize:({hasRole:e,hasPermission:t})=>e("owner")||t("invoice:delete")}]})})};var M=o(5403),O=o(66934),D=o(85818),V=o(37398);const W=(0,O.ZP)(M.Z)((({theme:e})=>({color:e.palette.text.secondary}))),A=(0,O.ZP)(D.ZP)((({theme:e})=>({fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.button.fontSize}))),L=()=>{const[e,t]=(0,p.lr)(),[o,r]=(0,y.useState)(e.get("query")||""),n=(0,V.Z)(o,500);return(0,S.Z)((()=>{t({...Object.fromEntries(e),query:n})}),[n]),(0,E.jsx)(i.Z,{sx:{px:2,py:1.5,display:"flex"},className:"search-form",children:(0,E.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},children:[(0,E.jsx)(W,{sx:{mr:1},color:"inherit"}),(0,E.jsx)(A,{value:o,placeholder:"\u062c\u0633\u062a\u062c\u0648 \u0634\u0645\u0627\u0631\u0647\u060c \u0645\u0634\u062a\u0631\u06cc \u0641\u0627\u06a9\u062a\u0648\u0631...",onChange:e=>r(e.target.value),sx:{flexGrow:1}})]})})},H={key:"manage-products",steps:[{title:"\u0645\u062f\u06cc\u0631\u06cc\u062a \u062e\u062f\u0645\u062a\u0627\u062a",intro:"\u062f\u0631 \u0641\u0631\u0622\u06cc\u0646\u062f \u0645\u062f\u06cc\u0631\u06cc\u062a \u062e\u062f\u0645\u062a\u0627\u062a\u060c \u0634\u0645\u0627 \u0647\u0645\u0647 \u062e\u062f\u0645\u062a\u0627\u062a\u06cc\u06cc \u06a9\u0647 \u0628\u0627 \u0622\u0646\u200c\u0647\u0627 \u062f\u0631 \u0641\u0631\u0622\u06cc\u0646\u062f\u0647\u0627\u06cc \u0645\u062e\u062a\u0644\u0641 \u0645\u062b\u0644 \u0641\u0631\u0622\u06cc\u0646\u062f \u062b\u0628\u062a \u0641\u0627\u06a9\u062a\u0648\u0631 \u0641\u0631\u0648\u0634\u060c \u0631\u0632\u0631\u0648 \u0648 \u06cc\u0627 \u062e\u0631\u06cc\u062f\u060c \u0627\u0633\u062a\u0641\u0627\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u062f\u060c \u062b\u0628\u062a \u0648 \u0645\u0634\u0627\u0647\u062f\u0647 \u0645\u06cc\u200c\u06a9\u0646\u06cc\u062f."},{title:"\u062e\u062f\u0645\u062a \u062c\u062f\u06cc\u062f",intro:"\u0628\u0627 \u06a9\u0644\u06cc\u06a9 \u0628\u0631\u0631\u0648\u06cc \u0627\u06cc\u0646 \u062f\u06a9\u0645\u0647 \u0648 \u0648\u0631\u0648\u062f \u0645\u0634\u062e\u0635\u0627\u062a \u062e\u062f\u0645\u062a \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u062e\u062f\u0645\u062a\u06cc \u062c\u062f\u06cc\u062f\u06cc \u0628\u0647 \u0644\u06cc\u0633\u062a \u062e\u062f\u0645\u062a\u0627\u062a\u06cc \u062e\u0648\u062f \u0627\u0636\u0627\u0641\u0647 \u06a9\u0646\u06cc\u062f.",element:".add-new"},{title:"\u06af\u0631\u0648\u0647\u200c\u0647\u0627\u06cc \u062e\u062f\u0645\u062a",intro:"\u0634\u0645\u0627 \u0645\u06cc\u200c\u062a\u0648\u0627\u0646\u06cc\u062f \u0628\u0647 \u0647\u0631 \u062e\u062f\u0645\u062a \u06cc\u06a9 \u06af\u0631\u0648\u0647 \u0627\u062e\u062a\u0635\u0627\u0635 \u062f\u0647\u06cc\u062f \u062a\u0627 \u062f\u0631 \u0641\u0631\u0622\u06cc\u0646\u062f\u0647\u0627\u06cc \u062f\u06cc\u06af\u0631\u060c \u0639\u0644\u0627\u0648\u0647 \u0628\u0631 \u06af\u0632\u0627\u0631\u0634 \u0628\u0631\u0627\u0633\u0627\u0633 \u062e\u062f\u0645\u062a\u060c \u06af\u0632\u0627\u0631\u0634 \u0628\u0631\u0627\u0633\u0627\u0633 \u06af\u0631\u0648\u0647 \u0631\u0627 \u0647\u0645 \u0645\u0634\u0627\u0647\u062f\u0647 \u0646\u0645\u0627\u06cc\u06cc\u062f.",element:".manage-categories"}]},$=()=>{const{inject:e}=(0,g.aC)(),t=(0,u.dp)("Invoices.Main"),[o]=(0,p.lr)(),{data:l,total:d,loading:Z,loadMore:f,reload:j}=(0,b.Z)({handleFetch:e=>t.list({...e,...Object.fromEntries([...o])}),loadDeps:[o],infiniteScrollDefaultParams:{page:o.has("page")?o.get("page"):0,perPage:o.has("perPage")?o.get("perPage"):25}}),P=Object.assign({},...e("Invoices","InvoicesList.Hooks")||[]),C=(0,u.Vg)("Invoices.list");return(0,E.jsx)(v.xf,{...C,tour:H,children:(0,E.jsxs)(x.Z,{children:[(0,E.jsxs)(i.Z,{sx:{display:"flex",mb:{xs:0,sm:1}},children:[(0,E.jsx)(i.Z,{sx:{flexGrow:1}}),(0,E.jsx)(n.Z,{direction:"row",spacing:1,children:(0,E.jsx)(m.Z,{actions:h()([...c()(e("Invoices","ProductsList.ActionsList",{data:l,loading:Z,reload:j,...P})||[])],(e=>e.priority)),ResponsiveActionIcon:(0,E.jsx)(r.Z,{}),responsiveActionProps:{color:"primary"}})})]}),(0,E.jsxs)(a.Z,{variant:"outlined",children:[(0,E.jsx)(L,{}),(0,E.jsx)(s.Z,{}),(0,E.jsx)(N,{data:l,loading:Z,meta:{total:d},infiniteScrollProps:{loading:!1,hasNextPage:l.length<d,onLoadMore:f}})]}),e("Invoices","InvoicesList.Footer",{data:l,loading:Z,reload:j,...P})]})})}},4390:(e,t,o)=>{"use strict";var r=o(64836);t.Z=void 0;var i=r(o(45649)),n=o(80184),a=(0,i.default)((0,n.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"MenuOutlined");t.Z=a},49877:(e,t,o)=>{"use strict";o.d(t,{Z:()=>Z});var r=o(63366),i=o(87462),n=o(72791),a=o(28182),s=o(94419),l=o(95080),c=o(14036),d=o(31402),h=o(75878),p=o(21217);function u(e){return(0,p.Z)("MuiFab",e)}const g=(0,h.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var m=o(66934),x=o(80184);const v=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],b=(0,m.ZP)(l.Z,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,m.FO)(e)||"classes"===e,overridesResolver:(e,t)=>{const{ownerState:o}=e;return[t.root,t[o.variant],t[`size${(0,c.Z)(o.size)}`],"inherit"===o.color&&t.colorInherit,t[(0,c.Z)(o.size)],t[o.color]]}})((({theme:e,ownerState:t})=>{var o,r;return(0,i.Z)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(o=(r=e.palette).getContrastText)?void 0:o.call(r,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${g.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===t.size&&{width:40,height:40},"medium"===t.size&&{width:48,height:48},"extended"===t.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===t.variant&&"small"===t.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===t.variant&&"medium"===t.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===t.color&&{color:"inherit"})}),(({theme:e,ownerState:t})=>(0,i.Z)({},"inherit"!==t.color&&"default"!==t.color&&null!=(e.vars||e).palette[t.color]&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}})),(({theme:e})=>({[`&.${g.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),Z=n.forwardRef((function(e,t){const o=(0,d.Z)({props:e,name:"MuiFab"}),{children:n,className:l,color:h="default",component:p="button",disabled:g=!1,disableFocusRipple:m=!1,focusVisibleClassName:Z,size:f="large",variant:j="circular"}=o,P=(0,r.Z)(o,v),C=(0,i.Z)({},o,{color:h,component:p,disabled:g,disableFocusRipple:m,size:f,variant:j}),y=(e=>{const{color:t,variant:o,classes:r,size:n}=e,a={root:["root",o,`size${(0,c.Z)(n)}`,"inherit"===t?"colorInherit":t]},l=(0,s.Z)(a,u,r);return(0,i.Z)({},r,l)})(C);return(0,x.jsx)(b,(0,i.Z)({className:(0,a.default)(y.root,l),component:p,disabled:g,focusRipple:!m,focusVisibleClassName:(0,a.default)(y.focusVisible,Z),ownerState:C,ref:t},P,{classes:y,children:n}))}))},58645:e=>{e.exports=function(e,t){for(var o,r=-1,i=e.length;++r<i;){var n=t(e[r]);void 0!==n&&(o=void 0===o?n:o+n)}return o}},31357:(e,t,o)=>{var r=o(56025),i=o(58645);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):0}}}]);
//# sourceMappingURL=3457.a0d07441.chunk.js.map