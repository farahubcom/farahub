"use strict";(globalThis.webpackChunkfarahub=globalThis.webpackChunkfarahub||[]).push([[8144],{11692:(e,o,r)=>{r.d(o,{Z:()=>S});var t=r(66934),i=r(49877),n=r(68870),a=r(13967),s=r(95193),l=r(55931),d=r(39157),c=r(61889),h=r(36314),p=r(36151),u=r(57689),g=r(46019),m=r(28367),x=r(26386),Z=r(13400),b=r(20890),v=(r(72791),r(80184));const f=(0,t.ZP)(Z.Z)((({theme:e})=>({display:"flex",flexDirection:"column",minWidth:94.5}))),j=(0,t.ZP)("span")((({theme:e})=>({display:"inline-block"}))),y=(0,t.ZP)(b.Z)((({theme:e})=>({...e.typography.button,display:"inline-block"}))),P=({label:e,labelTypographyProps:o={},children:r,...t})=>(0,v.jsxs)(f,{...t,children:[(0,v.jsx)(j,{children:r}),e&&(0,v.jsx)(y,{...o,children:e})]});var C=r(26411);const w=(0,t.ZP)(i.Z)((({theme:e})=>({position:"fixed",bottom:`calc(${e.spacing(2)} + 48px)`,left:e.spacing(2),zIndex:100}))),k=(0,t.ZP)(n.Z)((({theme:e})=>({}))),z=(0,t.ZP)("span")((({theme:e})=>({border:"1px solid currentColor",borderRadius:"50%",padding:e.spacing(.75),display:"flex",alignItems:"center",justifyContent:"center"}))),S=({actions:e=[],ResponsiveActionComponent:o=w,responsiveActionProps:r={},ResponsiveActionIcon:t,showResponsiveOnDesktop:i=!1})=>{var n,Z;const b=(0,a.Z)(),f=(0,s.Z)(b.breakpoints.down("sm")),j=(0,u.s0)(),y="actions",{hasSegment:S,addSegment:R,removeSegment:F}=(0,x.Z)(),E=(0,m.Z)(),I=({children:o})=>e.length>1?(0,v.jsx)(v.Fragment,{children:o}):(0,v.jsx)(l.Z,{direction:"up",in:!E,mountOnEnter:!0,unmountOnExit:!0,children:o});return i||f?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(I,{children:(0,v.jsx)(o,{onClick:e.length>1?()=>j(R(y)):null===(n=e[0])||void 0===n?void 0:n.onClick,...r,children:e.length>1?t:null===(Z=e[0])||void 0===Z?void 0:Z.icon})}),e.length>0&&(0,v.jsx)(C.Z,{dialogProps:{fullWidth:!0,maxWidth:"xs"},open:S(y),onClose:()=>j(F(y),{replace:!0}),children:(0,v.jsx)(d.Z,{children:(0,v.jsx)(c.ZP,{container:!0,columns:3,children:e.map(((e,o)=>(0,v.jsx)(g.FY,{authorize:e.authorize,children:(0,v.jsx)(c.ZP,{item:!0,xs:1,alignItems:"center",justifyContent:"center",children:(0,v.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,v.jsx)(P,{label:e.title,onClick:e.onClick,size:"large",color:"inherit",labelTypographyProps:{sx:{mt:1}},children:(0,v.jsx)(z,{children:e.icon})})})})},o)))})})})]}):(0,v.jsx)(k,{children:(0,v.jsx)(h.Z,{direction:f?"row-reverse":"row",spacing:1,children:e.map(((e,o)=>(0,v.jsx)(g.FY,{authorize:e.authorize,children:(0,v.jsx)(p.Z,{variant:"transparent",disableElevation:!0,startIcon:e.icon,onClick:e.onClick,...e.buttonProps,children:e.title})},o)))})})}},18144:(e,o,r)=>{r.r(o),r.d(o,{default:()=>L});var t=r(42419),i=r(4390),n=r(68870),a=r(36314),s=r(57621),l=r(94721),d=r(25506),c=r.n(d),h=r(64286),p=r.n(h),u=r(58518),g=r(11087),m=r(64742),x=r(46019),Z=r(11692),b=r(61709),v=r(7175),f=r(42239),j=r(99519),y=r(82271),P=r(88471),C=r(76278),w=r(49900),k=r(72791),z=r(78925),S=r(75669),R=r(90577),F=r(26182),E=r(27067),I=r(80184);const D=({loading:e,data:o,meta:r,infiniteScrollProps:t,onClickEdit:i,onClickDelete:n})=>{const{inject:a}=(0,x.aC)(),[s,l]=(0,g.lr)(),[d,h]=(0,k.useState)(s.has("sort")?s.get("sort"):"-createdAt");(0,R.Z)((()=>{l({...Object.fromEntries(s),sort:d})}),[d]);const u=(0,F.Z)(),Z=(0,E.Z)(),b=(0,m.Vg)("People.details");return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(z.Z,{data:o,loading:e,infiniteScrollProps:t,definitions:p()([{title:"#",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:100},renderCell:(e,o)=>(0,I.jsx)(S.Z,{children:u(o)}),priority:100},{field:"code",title:"\u06a9\u062f",headerCellProps:{align:"center"},rowCellProps:{align:"center",width:100},render:e=>(0,I.jsx)(S.Z,{children:e.code})||"-",priority:200},{field:"fullName",title:"\u0646\u0627\u0645 \u0648 \u0646\u0627\u0645 \u062e\u0627\u0646\u0648\u0627\u062f\u06af\u06cc",rowCellProps:{width:200},priority:300},...c()(a("Employees","EmployeesList.definitions")||[])],(e=>e.priority)),renderSheetTitle:e=>(0,I.jsx)(S.Z,{children:e.fullName}),renderListItemChildren:e=>(0,I.jsx)(C.Z,{onClick:()=>Z(b(e)),children:(0,I.jsx)(w.Z,{primary:e.fullName})}),tableRowProps:e=>({hover:!0,striped:!0,onClick:()=>Z(b(e))}),paginationProps:{count:r.total,rowsPerPage:s.get("perPage")||25,page:s.get("page")||0,onPageChange:(e,o)=>l({...Object.fromEntries([...s]),page:o}),onRowsPerPageChange:e=>l({...Object.fromEntries([...s]),perPage:e.target.value})},actions:[{title:"\u0648\u06cc\u0631\u0627\u06cc\u0634",icon:(0,I.jsx)(P.Z,{}),onClick:i,authorize:({hasRole:e,hasPermission:o})=>e("owner")||o("person:edit")},{title:"\u062d\u0630\u0641",icon:(0,I.jsx)(y.Z,{}),onClick:e=>n(e,!1),authorize:({hasRole:e,hasPermission:o})=>e("owner")||o("person:delete")}]})})};var O=r(5403),M=r(66934),V=r(85818),N=r(37398);const T=(0,M.ZP)(O.Z)((({theme:e})=>({color:e.palette.text.secondary}))),W=(0,M.ZP)(V.ZP)((({theme:e})=>({fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.button.fontSize}))),A=()=>{const[e,o]=(0,g.lr)(),[r,t]=(0,k.useState)(e.get("query")||""),i=(0,N.Z)(r,500);return(0,R.Z)((()=>{o({query:i})}),[i]),(0,I.jsx)(n.Z,{sx:{px:2,py:1.5,display:"flex"},children:(0,I.jsxs)(n.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:1},children:[(0,I.jsx)(T,{sx:{mr:1},color:"inherit"}),(0,I.jsx)(W,{value:r,placeholder:"\u062c\u0633\u062a\u062c\u0648 \u0646\u0627\u0645 \u06cc\u0627 \u06a9\u062f \u06a9\u0627\u0631\u0645\u0646\u062f...",onChange:e=>t(e.target.value),sx:{flexGrow:1}})]})})},L=()=>{const{inject:e}=(0,x.aC)(),o=(0,m.dp)("People.Main"),r=(0,m.Co)("People.PersonDeleteDialog"),d=(0,m.Co)("People.PersonFormDialog"),[h]=(0,g.lr)(),{data:y,total:P,loading:C,loadMore:w,reload:k}=(0,j.Z)({handleFetch:e=>o.list({roles:["employee"],...e,...Object.fromEntries([...h])}),loadDeps:[h],infiniteScrollDefaultParams:{page:h.has("page")?h.get("page"):0,perPage:h.has("perPage")?h.get("perPage"):25}}),{enqueueSnackbar:z}=(0,u.Ds)(),[S,R,F]=(0,f.Z)("form"),E=e=>{z(e),k(),F()},[O,M,V]=(0,f.Z)("delete",{hashDeps:["person"]}),N=Object.assign({},...e("Employees","EmployeesList.Hooks")||[]),T=(0,m.Vg)("Employees.manage");return(0,I.jsx)(v.xf,{...T,children:(0,I.jsxs)(b.Z,{children:[(0,I.jsxs)(n.Z,{sx:{display:"flex",mb:{xs:0,sm:1}},children:[(0,I.jsx)(n.Z,{sx:{flexGrow:1}}),(0,I.jsx)(a.Z,{direction:"row",spacing:1,children:(0,I.jsx)(Z.Z,{actions:p()([{title:"\u06a9\u0627\u0631\u0645\u0646\u062f \u062c\u062f\u06cc\u062f",icon:(0,I.jsx)(t.Z,{}),onClick:()=>{R({dialogTitle:"\u062b\u0628\u062a \u0645\u0634\u062e\u0635\u0627\u062a \u06a9\u0627\u0631\u0645\u0646\u062f",onCreateOrUpdate:()=>E("\u0645\u0634\u062e\u0635\u0627\u062a \u06a9\u0627\u0631\u0645\u0646\u062f \u062b\u0628\u062a \u06af\u0631\u062f\u06cc\u062f.")})},authorize:({hasRole:e,hasPermission:o})=>e("owner")||o("person:edit"),priority:100},...c()(e("People","PeopleList.ActionsList",{data:y,loading:C,reload:k,...N})||[])],(e=>e.priority)),ResponsiveActionIcon:(0,I.jsx)(i.Z,{}),responsiveActionProps:{color:"primary"}})})]}),(0,I.jsxs)(s.Z,{variant:"outlined",sx:{flexGrow:1},children:[(0,I.jsx)(A,{}),(0,I.jsx)(l.Z,{}),(0,I.jsx)(D,{data:y,loading:C,meta:{total:P},infiniteScrollProps:{loading:!1,hasNextPage:y.length<P,onLoadMore:w},onClickEdit:e=>{R({defaultValues:e,dialogTitle:"\u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u0645\u0634\u062e\u0635\u0627\u062a \u06a9\u0627\u0631\u0645\u0646\u062f",onCreateOrUpdate:()=>E("\u0645\u0634\u062e\u0635\u0627\u062a \u06a9\u0627\u0631\u0645\u0646\u062f \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u06af\u0631\u062f\u06cc\u062f.")})},onClickDelete:(e,o)=>{M({person:e,permanent:o})}})]}),(0,I.jsx)(d,{defaultValues:{roles:["employee"]},middleware:o,...S}),(0,I.jsx)(r,{...O,onDelete:()=>{z("\u06a9\u0627\u0631\u0645\u0646\u062f \u062d\u0630\u0641 \u06af\u0631\u062f\u06cc\u062f"),V(),k()}}),e("Employees","EmployeesList.Footer",{data:y,loading:C,reload:k,...N})]})})}},4390:(e,o,r)=>{var t=r(64836);o.Z=void 0;var i=t(r(45649)),n=r(80184),a=(0,i.default)((0,n.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"MenuOutlined");o.Z=a},49877:(e,o,r)=>{r.d(o,{Z:()=>v});var t=r(63366),i=r(87462),n=r(72791),a=r(28182),s=r(94419),l=r(95080),d=r(14036),c=r(31402),h=r(75878),p=r(21217);function u(e){return(0,p.Z)("MuiFab",e)}const g=(0,h.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var m=r(66934),x=r(80184);const Z=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],b=(0,m.ZP)(l.Z,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,m.FO)(e)||"classes"===e,overridesResolver:(e,o)=>{const{ownerState:r}=e;return[o.root,o[r.variant],o[`size${(0,d.Z)(r.size)}`],"inherit"===r.color&&o.colorInherit,o[(0,d.Z)(r.size)],o[r.color]]}})((({theme:e,ownerState:o})=>{var r,t;return(0,i.Z)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:null==(r=(t=e.palette).getContrastText)?void 0:r.call(t,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${g.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},"small"===o.size&&{width:40,height:40},"medium"===o.size&&{width:48,height:48},"extended"===o.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===o.variant&&"small"===o.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===o.variant&&"medium"===o.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===o.color&&{color:"inherit"})}),(({theme:e,ownerState:o})=>(0,i.Z)({},"inherit"!==o.color&&"default"!==o.color&&null!=(e.vars||e).palette[o.color]&&{color:(e.vars||e).palette[o.color].contrastText,backgroundColor:(e.vars||e).palette[o.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[o.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[o.color].main}}})),(({theme:e})=>({[`&.${g.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}}))),v=n.forwardRef((function(e,o){const r=(0,c.Z)({props:e,name:"MuiFab"}),{children:n,className:l,color:h="default",component:p="button",disabled:g=!1,disableFocusRipple:m=!1,focusVisibleClassName:v,size:f="large",variant:j="circular"}=r,y=(0,t.Z)(r,Z),P=(0,i.Z)({},r,{color:h,component:p,disabled:g,disableFocusRipple:m,size:f,variant:j}),C=(e=>{const{color:o,variant:r,classes:t,size:n}=e,a={root:["root",r,`size${(0,d.Z)(n)}`,"inherit"===o?"colorInherit":o]},l=(0,s.Z)(a,u,t);return(0,i.Z)({},t,l)})(P);return(0,x.jsx)(b,(0,i.Z)({className:(0,a.default)(C.root,l),component:p,disabled:g,focusRipple:!m,focusVisibleClassName:(0,a.default)(C.focusVisible,v),ownerState:P,ref:o},y,{classes:C,children:n}))}))}}]);
//# sourceMappingURL=8144.1ca5dae4.chunk.js.map