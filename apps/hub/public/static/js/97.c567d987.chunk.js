"use strict";(globalThis.webpackChunkfarahub=globalThis.webpackChunkfarahub||[]).push([[97],{40097:(e,n,r)=>{r.r(n),r.d(n,{default:()=>U});var s=r(5748),t=r(71043),l=r(81e3),a=r(88911),i=r(8302),o=r(81045),d=r(23851),c=r(26353),u=r(28359),x=r(40217),h=r(65043),p=r(73216),g=r(35475),m=r(18012),A=r(66789),j=r(12766),v=r(27800),b=r(74175),f=r(94329),y=r(74563),C=r(34535),P=r(63336),w=r(83462),k=r(4219),M=r(39336),S=r(14194),H=r(68903),T=r(85865),F=r(29347),D=r(40840),z=r.n(D),I=r(33411),W=r.n(I),V=r(46987),E=r(24858),O=r(67444),L=r(91409),Y=r(42504),G=r(70579);const q=[{name:"\u0622\u0632\u0645\u0627\u06cc\u0634\u06cc",value:"demo"},{name:"\u0634\u0634\u200c \u0645\u0627\u0647\u0647",value:"semi-annually"},{name:"\u06cc\u06a9\u200c \u0633\u0627\u0644\u0647",value:"annually"},{name:"\u0645\u0627\u062f\u0627\u0645\u200c\u0627\u0644\u0639\u0645\u0631",value:"lifetime"}],N=(0,C.Ay)(P.A,{shouldForwardProp:e=>"selected"!==e})((({theme:e,selected:n})=>({display:"inline-block",padding:e.spacing(1,3),cursor:"pointer",outline:"1px solid transparent",transition:e.transitions.create("all"),...n&&{borderColor:e.palette.primary.main,outlineColor:e.palette.primary.main,"& .MuiTypography-root":{fontWeight:700}}}))),K=({open:e,onClose:n,workspace:r,onSave:s=()=>{}})=>{const t=(0,m.Mv)("core.workspaces"),o={modules:[],period:"annually"},{control:d,register:c,handleSubmit:u,formState:{errors:x},setValue:p,reset:g,setError:A}=(0,E.mN)({defaultValues:o}),j=(0,E.FH)({control:d,name:"period"}),v=(0,E.FH)({control:d,name:"modules"}),[b,C]=(0,h.useState)(!1);(0,h.useEffect)((()=>{if(!e){const e=setTimeout((()=>{g(o)}),500);return()=>{clearTimeout(e)}}}),[e,r]);const{enqueueSnackbar:P}=(0,V.dh)(),{isOpen:D,open:I,close:K}=(0,L.A)();return(0,G.jsxs)(w.A,{open:e,onClose:n,fullWidth:!0,maxWidth:"sm",children:[(0,G.jsx)(k.A,{children:"\u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0631\u0646\u0627\u0645\u0647 \u062c\u062f\u06cc\u062f"}),(0,G.jsx)(M.A,{}),(0,G.jsxs)(l.A,{sx:{p:2},children:[(0,G.jsx)(S.A,{variant:"outlined",color:"warning",sx:{mb:2},children:"\u067e\u0633 \u0627\u0632 \u0627\u0641\u0632\u0648\u062f\u0646 \u0628\u0631\u0646\u0627\u0645\u0647\u200c\u0647\u0627\u06cc \u062c\u062f\u06cc\u062f \u0628\u0647 \u0645\u06cc\u0632 \u06a9\u0627\u0631\u060c \u062d\u062a\u0645\u0627 \u0633\u0631\u0648\u0631 \u0628\u0627\u06cc\u062f \u0631\u06cc\u0633\u062a\u0627\u0631\u062a \u06af\u0631\u062f\u062f."}),(0,G.jsxs)(H.Ay,{container:!0,spacing:2,children:[(0,G.jsx)(H.Ay,{item:!0,xs:12,md:12,children:(0,G.jsx)(O.A,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",label:"\u0628\u0631\u0646\u0627\u0645\u0647\u200c\u0647\u0627",variant:"filled",value:v?W()(v,"name"):"",onChange:()=>{},inputProps:{readOnly:!0},onFocus:()=>I(),onClick:()=>I(),onKeyDown:e=>13===e.keyCode&&I()})}),(0,G.jsx)(H.Ay,{item:!0,xs:12,md:12,justifyContent:"center",display:"flex",children:(0,G.jsx)(a.A,{gap:1,flexDirection:"row",children:q.map(((e,n)=>(0,G.jsx)(N,{variant:"outlined",selected:j===e.value,onClick:()=>p("period",e.value),children:(0,G.jsx)(T.A,{children:e.name})},n)))})})]})]}),(0,G.jsx)(M.A,{}),(0,G.jsxs)(F.A,{children:[(0,G.jsx)(y.A,{loading:b,loadingPosition:"start",type:"submit",variant:"contained",startIcon:(0,G.jsx)(f.A,{}),onClick:u((async e=>{C(!0);const l=await t.subscribe(r.id,{...e,modules:W()(e.modules,"id")});l.ok?(P("\u0645\u06cc\u0632 \u06a9\u0627\u0631 \u0628\u0631\u0648\u0632\u0631\u0633\u0627\u0646\u06cc \u06af\u0631\u062f\u06cc\u062f."),n(),s(),g(o)):422===l.status&&z()(l.errors,((e,n)=>{A(n,{type:"manual",message:e[0]})})),C(!1)})),children:"\u062b\u0628\u062a"}),(0,G.jsx)(l.A,{sx:{flexGrow:1}}),(0,G.jsx)(i.A,{type:"button",onClick:n,children:"\u0627\u0646\u0635\u0631\u0627\u0641"})]}),(0,G.jsx)(Y.A,{open:D,onClose:K,selectable:!0,onClear:()=>{p("modules",""),K()},onSelect:e=>{p("modules",[...v,e]),K()},selected:v})]})},U=()=>{const{workspace:e}=(0,p.KC)(),{workspaceId:n}=(0,p.g)(),r=(0,m.Mv)("core.Workspaces"),[f,y]=(0,g.ok)(),{data:C,total:P,loading:w,loadMore:k,reload:M}=(0,b.A)({handleFetch:e=>r.subscriptions(n,{...e,...Object.fromEntries([...f])}),loadDeps:[f],infiniteScrollDefaultParams:{page:f.has("page")?f.get("page"):0,perPage:f.has("perPage")?f.get("perPage"):25}}),S=(0,v.A)(),[H,T]=(0,h.useState)({open:!1});return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(l.A,{sx:{display:"flex",mb:{xs:0,sm:1},px:3,py:2},children:[(0,G.jsx)(l.A,{sx:{flexGrow:1}}),(0,G.jsx)(a.A,{direction:"row",spacing:1,children:(0,G.jsx)(i.A,{variant:"contained",startIcon:(0,G.jsx)(s.In,{icon:"solar:add-circle-bold"}),onClick:()=>T({open:!0}),children:"\u0627\u0634\u062a\u0631\u0627\u06a9 \u062c\u062f\u06cc\u062f"})})]}),(0,G.jsx)(A.A,{data:C,loading:w,meta:{total:P},infiniteScrollProps:{loading:!1,hasNextPage:C.length<P,onLoadMore:k},definitions:[{title:"\u0631\u062f\u06cc\u0641",headerCellProps:{align:"center"},rowCellProps:{align:"center"},renderCell:(e,n)=>S(n)},{renderCell:e=>(0,G.jsxs)(l.A,{sx:{display:"flex",alignItems:"center"},children:[(0,G.jsx)(o.A,{variant:"rounded",alt:e.subscribed.identifier,src:e.subscribed.picture,sx:{mr:1},children:(0,G.jsx)(t.A,{})}),(0,G.jsx)(l.A,{children:(0,G.jsx)("strong",{children:e.subscribed.name})})]})},{title:"\u062a\u0627\u0631\u06cc\u062e \u0634\u0631\u0648\u0639",headerCellProps:{align:"center"},rowCellProps:{align:"center"},render:(e,n)=>e.validFrom?(0,G.jsx)(j.A,{children:(0,u.A)(new Date(e.validFrom),"yyyy/MM/dd hh:mm")}):"-"},{title:"\u062a\u0627\u0631\u06cc\u062e \u0627\u0639\u062a\u0628\u0627\u0631",headerCellProps:{align:"center"},rowCellProps:{align:"center"},render:(e,n)=>e.validTill?(0,G.jsx)(j.A,{children:(0,u.A)(new Date(e.validTill),"yyyy/MM/dd hh:mm")}):"\u221e"},{title:"\u0632\u0645\u0627\u0646 \u0628\u0627\u0642\u06cc\u0645\u0627\u0646\u062f\u0647",headerCellProps:{align:"center"},rowCellProps:{align:"center"},render:(e,n)=>e.validTill?(0,G.jsxs)("span",{children:[(0,G.jsx)(j.A,{children:(0,x.A)(new Date(e.validTill),new Date)})," ",(0,G.jsx)("small",{children:"\u0631\u0648\u0632"})]}):"\u221e"}],renderSheetTitle:e=>{var n;return null===(n=e.subscribed)||void 0===n?void 0:n.name},renderListItemChildren:(e,n)=>(0,G.jsxs)(G.Fragment,{children:[(0,G.jsx)(d.A,{children:(0,G.jsx)(o.A,{variant:"rounded",alt:e.subscribed.identifier,src:e.subscribed.picture,children:(0,G.jsx)(t.A,{})})}),(0,G.jsx)(c.A,{primary:(0,G.jsx)("strong",{children:e.subscribed.name})})]}),listItemProps:{disablePadding:!1},paginationProps:{count:P,rowsPerPage:f.get("perPage")||25,page:f.get("page")||0,onPageChange:(e,n)=>y({...Object.fromEntries([...f]),page:n}),onRowsPerPageChange:e=>y({...Object.fromEntries([...f]),perPage:e.target.value})}}),(0,G.jsx)(K,{workspace:e,...H,onClose:()=>T({open:!1}),onSave:()=>{M(),T({open:!1})}})]})}},40217:(e,n,r)=>{r.d(n,{A:()=>d});var s=r(91662);function t(e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),e.getTime()-n.getTime()}var l=r(43666);function a(e){(0,l.A)(1,arguments);var n=(0,s.A)(e);return n.setHours(0,0,0,0),n}var i=864e5;function o(e,n){var r=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return r<0?-1:r>0?1:r}function d(e,n){(0,l.A)(2,arguments);var r=(0,s.A)(e),d=(0,s.A)(n),c=o(r,d),u=Math.abs(function(e,n){(0,l.A)(2,arguments);var r=a(e),s=a(n),o=r.getTime()-t(r),d=s.getTime()-t(s);return Math.round((o-d)/i)}(r,d));r.setDate(r.getDate()-c*u);var x=c*(u-Number(o(r,d)===-c));return 0===x?0:x}},42504:(e,n,r)=>{r.d(n,{A:()=>T});var s=r(71612),t=r(39578),l=r(13232),a=r(34535),i=r(28076),o=r(81e3),d=r(81637),c=r(79650),u=r(71806),x=r(73460),h=r(39652),p=r(81045),g=r(4219),m=r(17392),A=r(39336),j=r(51787),v=r(29347),b=r(8302),f=r(65043),y=r(37978),C=r(50809),P=r(18012),w=r(67444),k=r(99275),M=r(70579);const S=(0,a.Ay)(i.A)((({theme:e,hover:n,selected:r})=>({cursor:n?"pointer":"auto",backgroundColor:r?e.palette.action.hover:e.palette.common.white,"&:focus":{backgroundColor:e.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}))),H=({loading:e,modules:n,selected:r,onSelect:s,selectable:t})=>{const a=e=>!(!t||!r)&&(Array.isArray(r)?r.filter((n=>n.id===e.id)).length>0:r.id===e.id);return e?(0,M.jsx)(o.A,{sx:{px:5,py:5,textAlign:"center"},children:(0,M.jsx)(d.A,{})}):n.length<1?(0,M.jsxs)(o.A,{sx:{px:5,py:5,textAlign:"center"},children:[(0,M.jsx)(l.A,{fontSize:"large"}),(0,M.jsx)("p",{children:"\u0645\u0648\u0631\u062f\u06cc \u062c\u0647\u062a \u0646\u0645\u0627\u06cc\u0634 \u0648\u062c\u0648\u062f \u0646\u062f\u0627\u0631\u062f."})]}):(0,M.jsx)(c.A,{sx:{overflow:"auto",maxHeight:400},children:(0,M.jsx)(u.A,{stickyHeader:!0,size:"small",children:(0,M.jsx)(x.A,{children:n.map(((e,n)=>(0,M.jsxs)(S,{selected:a(e),hover:t,onClick:()=>t&&s(e),children:[(0,M.jsx)(h.A,{align:"center",children:n+1}),(0,M.jsx)(h.A,{children:(0,M.jsxs)(o.A,{sx:{display:"flex"},children:[(0,M.jsx)(p.A,{src:e.picture,variant:"rounded",children:(0,M.jsx)(C.A,{})}),(0,M.jsxs)(o.A,{sx:{pl:2},children:[(0,M.jsx)("strong",{children:e.name}),(0,M.jsx)("br",{}),(0,M.jsx)(o.A,{sx:{fontFamily:"Helvetica"},children:e.identifier})]})]})})]},n)))})})})},T=({open:e,onClose:n,selectable:r,selected:l,onSelect:a,onClear:i,queryParams:d={}})=>{const c=(0,P.Mv)("core.modules"),[u,x]=(0,f.useState)(!0),[h,p]=(0,f.useState)([]),[C,S]=(0,f.useState)(""),T=(0,y.A)(C,500);return(0,f.useEffect)((()=>{if(!e){const e=setTimeout((()=>{x(!0),""!==C&&S("")}),500);return()=>{clearTimeout(e)}}(async()=>{const{ok:e,data:n}=await c.list({...d,query:T,...""===C?{page:0,perPage:100}:{}});e&&(p(n),x(!1))})()}),[e,T]),(0,M.jsxs)(k.A,{open:e,onClose:n,dialogProps:{fullWidth:!0,maxWidth:"xs"},children:[(0,M.jsxs)(g.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,M.jsx)(o.A,{children:r?"\u0627\u0646\u062a\u062e\u0627\u0628 \u0645\u0627\u0698\u0648\u0644":"\u0645\u062f\u06cc\u0631\u06cc\u062a \u0645\u0627\u0698\u0648\u0644\u200c\u0647\u0627"}),(0,M.jsx)(m.A,{onClick:n,size:"small",children:(0,M.jsx)(s.A,{})})]}),(0,M.jsx)(A.A,{}),(0,M.jsx)(o.A,{sx:{p:2},children:(0,M.jsx)(w.A,{InputLabelProps:{shrink:!0},fullWidth:!0,size:"small",variant:"filled",label:"\u062c\u0633\u062a\u062c\u0648 \u0628\u0631\u0627\u0633\u0627\u0633 \u0646\u0627\u0645",value:C,onChange:e=>S(e.target.value),InputProps:{startAdornment:(0,M.jsx)(j.A,{position:"start",children:(0,M.jsx)(t.A,{})})}})}),(0,M.jsx)(H,{loading:u,modules:h,selectable:r,selected:l,onSelect:a}),(0,M.jsx)(A.A,{}),(0,M.jsxs)(v.A,{children:[r&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(b.A,{type:"button",onClick:n,children:"\u0628\u0633\u062a\u0646"}),(0,M.jsx)(o.A,{sx:{flexGrow:1}})]}),i&&(0,M.jsx)(b.A,{type:"button",onClick:i,children:"\u067e\u0627\u06a9 \u06a9\u0631\u062f\u0646"}),!r&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(o.A,{sx:{flexGrow:1}}),(0,M.jsx)(b.A,{type:"button",onClick:n,children:"\u0627\u0646\u0635\u0631\u0627\u0641"})]})]})]})}},50809:(e,n,r)=>{var s=r(24994);n.A=void 0;var t=s(r(40039)),l=r(70579);n.A=(0,t.default)((0,l.jsx)("path",{d:"m16.66 4.52 2.83 2.83-2.83 2.83-2.83-2.83zM9 5v4H5V5zm10 10v4h-4v-4zM9 15v4H5v-4zm7.66-13.31L11 7.34 16.66 13l5.66-5.66zM11 3H3v8h8zm10 10h-8v8h8zm-10 0H3v8h8z"}),"WidgetsOutlined")},71043:(e,n,r)=>{var s=r(24994);n.A=void 0;var t=s(r(40039)),l=r(70579);n.A=(0,t.default)((0,l.jsx)("path",{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11"}),"Extension")}}]);
//# sourceMappingURL=97.c567d987.chunk.js.map